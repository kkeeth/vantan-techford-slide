---
theme: seriph
background: https://picsum.photos/1920/1080
class: 'text-center'
highlighter: shiki
info: |
  ## JavaScript/React å…¥é–€è¬›ç¾©è³‡æ–™#18
  KADOKAWAãƒ‰ãƒ¯ãƒ³ã‚´æƒ…å ±å·¥ç§‘å­¦é™¢
  Created by [@kuwahara_jsri](https://x.com/kuwahara_jsri)
fonts:
  sans: 'Josefin Sans'
  serif: 'Futura'
  mono: 'Fira Code'
drawings:
  persist: false
title: JavaScript/React å…¥é–€è¬›ç¾©
---

# JavaScript/React å…¥é–€è¬›åº§

KADOKAWA ãƒ‰ãƒ¯ãƒ³ã‚´æƒ…å ±å·¥ç§‘å­¦é™¢

### #23 - 25 æœ€çµ‚é–‹ç™º / React ã§ SNS ã‚’é–‹ç™º
<div class="pt-12">
  <span @click="$slidev.nav.next" class="px-2 py-1 rounded cursor-pointer" hover="bg-white bg-opacity-10">
    Press Space for next page <carbon:arrow-right class="inline"/>
  </span>
</div>

---
layout: center
---

# å‡ºå¸­ğŸ–

---
layout: center
---

# ä½™è«‡

---

# ä½™è«‡

#### TBD

---
layout: center
---

# æˆæ¥­è³‡æ–™ğŸ“‹

---

<a href="https://vantan-techford-slide.vercel.app/" target="_blank">https://vantan-techford-slide.vercel.app/</a>

<br>

<img src="/assets/1/slide.png" width="750">

<style>
  img {
    margin: 24px auto 0;
    border: 1px solid #eee;
  }
</style>
---
layout: center
---

# ã§ã¯æœ¬æ—¥ã®æˆæ¥­ã¸ GO ğŸš€

---
layout: center
---

# React ã§ SNS ã‚’é–‹ç™º

---

# å®Œæˆç‰ˆ

<img alt="" src="/assets/23/goal.png" class="mx-auto" width="480" style="border: 1px solid #333;">

ãƒªãƒ³ã‚¯ï¼š[https://riotjs-hnpwa.firebaseapp.com/](https://riotjs-hnpwa.firebaseapp.com/)

---

# å®Ÿè£…æ–¹é‡
<p></p>

ã„ãã¤ã‹ã®æ‰‹é †ã«åˆ†ã‘ã¦å®Ÿè£…ã—ã¦ã„ãã¾ã™ğŸ’

- Firebase SDK ã‚’åˆ©ç”¨<br>
  â€» ä»Šå›ã¯ç§ã® config ã®å€¤ã‚’åˆ©ç”¨
- æŠ•ç¨¿æ¬„
- æŠ•ç¨¿å‡¦ç†ï¼ˆãƒ†ã‚­ã‚¹ãƒˆï¼‰
- æŠ•ç¨¿å‡¦ç†ï¼ˆç”»åƒï¼‰
- ä¸€è¦§è¡¨ç¤ºï¼ˆæŠ•ç¨¿æƒ…å ±ã®ãƒ•ã‚§ãƒƒãƒï¼‰
- å‰Šé™¤å‡¦ç†

---
layout: center
---

# Firebase SDK ã‚’åˆ©ç”¨

---

# Firebase ã¨ã¯
<p></p>

TBD

---

# é–‹ç™ºç’°å¢ƒ

<p></p>

ã¾ãšã¯ï¼Œã„ã¤ã‚‚é€šã‚Šé–‹ç™ºç’°å¢ƒæ§‹ç¯‰ã‹ã‚‰ğŸ’

```bash
# "my-chat" ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã§ï¼Œä»»æ„ã®ã‚‚ã®ã«å¤‰ãˆã¦ã‚‚ OK
> npm create vite@latest my-chat -- --template react
> Done. Now run:

  cd my-chat
  npm install
  npm run dev

# Material UI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# â€»ä»Šå›ã¯ï¼Œæœ€åˆã‹ã‚‰ MUI ã§ä½œã£ã¦ã„ãã¾ã™
> pnpm install @mui/material @emotion/react @emotion/styled @mui/icons-material
```

---
layout: center
---

# ã“ã“ã‹ã‚‰ã¯ç”»é¢ã‚’ä¸Šã‹ã‚‰ä½œã£ã¦ã„ãã¾ã™ğŸ’

---

# æŠ•ç¨¿æ¬„
<p></p>

ã¾ãšã¯ç”»é¢ã‚’åˆæœŸåŒ–ã—ã¾ã™ğŸ’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¸è¦ãªã‚³ãƒ¼ãƒ‰ã‚’æ¶ˆã—ã¦ã‚¹ãƒƒã‚­ãƒªã—ã¾ã—ã‚‡ã†ï¼

```jsx
import { useState } from 'react';
import './App.css';

const App = () => {

  return (
    <>
      <h1>Vite + React</h1>
    </>
  );
};

export default App;
```

---

# ã‚¿ã‚¤ãƒˆãƒ«
<p></p>

ã§ã¯ï¼Œç”»é¢ã‚’ä½œã£ã¦ã„ãã¾ã™ï¼ã¾ãšã¯ã‚¿ã‚¤ãƒˆãƒ«ã‹ã‚‰ğŸ’

```diff
  import './App.css';
+ import { Container, Typography } from '@mui/material';

ï¼ˆä¸­ç•¥ï¼‰

  return (
-   <>
-     <h1>Vite + React</h1>
-   </>
+   <Container maxWidth="sm" sx={{ mt: 4 }}>
+     <Typography variant="h2" gutterBottom align="center">
+       My Social App
+     </Typography>
+   </Container>
  );
```

æ–‡è¨€ã¯å¥½ããªã‚‚ã®ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼

---

# æŠ•ç¨¿æ¬„
<p></p>

ç¶šã„ã¦æŠ•ç¨¿æ¬„ã‚’ä½œã‚Šã¾ã™ğŸ’

```diff
- import { Container, Typography } from '@mui/material';
+ import { Container, Typography, Stack, TextField, Button } from '@mui/material';

ï¼ˆä¸­ç•¥ï¼‰

 return (
    <Container maxWidth="sm" sx={{ mt: 4 }}>
      <Typography variant="h2" gutterBottom align="center">
        My Social App
      </Typography>
+     <Stack spacing={2}>
+       <TextField
+         label="ä»Šã®æ°—åˆ†ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼Ÿ"
+         multiline
+         fullWidth
+         rows={4}
+       />
+       <Button variant="contained">
+         Post
+       </Button>
+     </Stack>
    </Container>
  );
```

ã“ã¡ã‚‰ã§è¦‹ãŸç›®ã¯ã§ãã¾ã—ãŸ(=ï¾ŸÏ‰ï¾Ÿ)ï¾‰

---

# æŠ•ç¨¿æ¬„
<p></p>

ç¶šã„ã¦ï¼Œå…¥åŠ›ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‚’ä¿æŒã™ã‚‹å‡¦ç†ã‚’æ›¸ã„ã¦ã„ãã¾ã™ğŸ’

```diff
  const App = () => {
+   const [text, setText] = useState('');

  <Stack spacing={2}>
    <TextField
      label="ä»Šã®æ°—åˆ†ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼Ÿ"
      multiline
      fullWidth
      rows={4}
+     value={text}
+     onChange={(e) => setText(e.target.value)}
    />
-   <Button variant="contained">
+   <Button variant="contained" disabled={!text.trim()}>
      Post
    </Button>
  </Stack>
```

ã¤ã„ã§ã«ï¼Œå…¥åŠ›ãŒãªã„å ´åˆã¯ãƒœã‚¿ãƒ³ã‚’éæ´»æ€§ã«ã—ã¾ã—ãŸï¼

---

# æŠ•ç¨¿ä¸€è¦§
<p></p>

ç¶šã„ã¦ï¼Œå…¥åŠ›ã—ãŸãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒã‚¹ãƒˆã—ï¼Œä¸€è¦§ã«è¡¨ç¤ºã™ã‚‹å‡¦ç†ã‚’æ›¸ãã¾ã™ğŸ’

```diff
- import { Container, Typography, Stack, TextField, Button } from '@mui/material';
+ import {
+   Container,
+   Typography,
+   Stack,
+   TextField,
+   Button,
+   Card,
+   CardContent
+ } from '@mui/material';

  const App = () => {
    const [text, setText] = useState('');
+   const [posts, setPosts] = useState([]);

+   const handlePost = () => {
+     const updatedPosts = [...posts, text]
+     setPosts(updatedPosts);
+     setText("");
+   };

ï¼ˆç¶šãï¼‰
```

---

# æŠ•ç¨¿ä¸€è¦§

```diff
 ï¼ˆç¶šãï¼‰

-       <Button variant="contained" disabled={!text.trim()}>
+       <Button variant="contained" disabled={!text.trim() onClick={handlePost}>
          Post
        </Button>
+       {posts.map((post) => (
+         <Card key={post}>
+           <CardContent>
+             <Typography>{post}</Typography>
+           </CardContent>
+         </Card>
+       ))}
      </Stack>
```

ã“ã“ã¾ã§ã§ãã¾ã™ã¨ï¼Œãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã‹ã‚‰ãªã«ã‹å…¥åŠ›ã—ï¼Œ`Post` ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ç”»é¢ä¸‹ã®ä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã‚‹ã¨æ€ã„ã¾ã™ï¼

---

# æ°¸ç¶šåŒ–
<p></p>

ç¾çŠ¶ã§ã™ã¨ï¼ŒæŠ•ç¨¿å†…å®¹ãŒç”»é¢ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨æ¶ˆãˆã¦ã—ã¾ã†æ®ç™ºæ€§ã®ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã«ãªã£ã¦ã—ã¾ã£ã¦ã„ã¾ã™ã®ã§ï¼Œæ°¸ç¶šåŒ–ã—ã¾ã™ï¼ä»Šå›ã¯ `LocalStorage` ã‚’åˆ©ç”¨ã—ã¾ã™ğŸ’ â€» å¾Œã»ã© Firehbase ã‚’ç”¨ã„ã¦ã¡ã‚ƒã‚“ã¨å¯¾å¿œã—ã¾ã™ï¼

```diff
- import { useState } from 'react';
+ import { useState, useEffect } from 'react';

ï¼ˆä¸­ç•¥ï¼‰

  useEffect(() => {
+   setPosts(JSON.parse(localStorage.getItem('post')) || [])
  }, [])

  const handlePost = () => {
    setPosts([...posts, text]);
    setText("");
+   localStorage.setItem('post', JSON.stringify(updatedPosts));
  };
```

å…¥åŠ›ã•ã‚ŒãŸæ–‡å­—åˆ—ã‚’ä½¿ã„ãŸã„ã®ã§ï¼ŒJSONãƒ»ãƒ‘ãƒ¼ã‚¹å‡¦ç†ã‚‚å…¥ã‚Œã¦ã„ã¾ã™ï¼

---

# æŠ•ç¨¿æ—¥ä»˜ã®è¿½åŠ 
<p></p>

ç¶šã„ã¦ï¼ŒæŠ•ç¨¿ã®æ—¥ä»˜ã‚’è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†ğŸ’

```diff
  const handlePost = () => {
-   const updatedPosts = [...posts, text]
+   const updatedPosts = [...posts, {
+     text,
+     createdAt: new Date().toLocaleString(),
+   }]
    setPosts(updatedPosts);
    setText("");
    localStorage.setItem('post', JSON.stringify(updatedPosts));
  };

ï¼ˆä¸­ç•¥ï¼‰

          <Card key={index}>
            <CardContent>
              <Typography>{post.content}</Typography>
+             <Box component="div">
+               <Typography variant="caption" color="textSecondary" sx={{ mt: 2 }}>
+                 Posted at: {post.createdAt}
+               </Typography>
+             </Box>
```

---

# æŠ•ç¨¿ã®å‰Šé™¤
<p></p>

ç¶šã„ã¦ï¼ŒæŠ•ç¨¿ã®å‰Šé™¤ãŒã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ğŸ’ã¾ãšã¯å‰Šé™¤ãƒœã‚¿ãƒ³ã®å®Ÿè£…ã‹ã‚‰ï¼

```diff
-   CardContent
+   CardContent,
+   CardActions
  } from '@mui/material';

ï¼ˆä¸­ç•¥ï¼‰

          </Typography>
        </Box>
      </CardContent>
+     <CardActions sx={{ justifyContent: "right"}}>
+       <Button
+         size="small"
+         color="error"
+         onClick={() => deletePost(index)}
+       >
+           Delete
+       </Button>
+     </CardActions>

ï¼ˆç¶šãï¼‰
```

---

# æŠ•ç¨¿ã®å‰Šé™¤
<p></p>

ã§ã¯ç¶šã„ã¦å‡¦ç†ã‚’æ›¸ã„ã¦ã„ãã¾ã™ğŸ’

```diff
ï¼ˆç¶šãï¼‰

+ const deletePost = async (targetIndex) => {
+   if (window.confirm("Are you sure you want to delete this post?")) {
+     try {
+       setPosts(posts.filter((_, index) => index !== targetIndex));
+       console.log("Post deleted!");
+     } catch (error) {
+       console.error("Error deleting post: ", error);
+     }
+   }
+ };
```

---
layout: intro
---

# æœ€çµ‚èª²é¡Œ

<br />

### ğŸ“ `React` ã‚’ç”¨ã„ã¦ ğ• ã®ã‚ˆã†ãª SNS ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ğŸ™‹

