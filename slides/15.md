---
theme: default
background: https://picsum.photos/1920/1080
class: text-center
highlighter: shiki
lineNumbers: true
info: |
  ## TypeScript + React ハンズオン講座
  第15回：チャットアプリ開発（プロジェクトセットアップと基本UI編）
fonts:
  sans: "Josefin Sans"
  serif: "Noto Sans JP"
  mono: "Fira Code"

drawings:
  persist: false
transition: slide-left
title: TypeScript/React 入門講義
---

# TypeScript + React<br>ハンズオン講座

## 第15回：チャットアプリ開発<br>プロジェクトセットアップと基本UI編

<div class="pt-12">
  <span @click="$slidev.nav.next" class="px-2 py-1 rounded cursor-pointer" hover="bg-white bg-opacity-10">
    Press Space for next page <carbon:arrow-right class="inline"/>
  </span>
</div>

<div class="abs-br m-6 flex gap-2">
  <button @click="$slidev.nav.openInEditor()" title="Open in Editor" class="text-xl slidev-icon-btn opacity-50 !border-none !hover:text-white">
    <carbon:edit />
  </button>
</div>

---
layout: section
---

# 出席確認✋️

---
layout: default
---

# 本日の内容

<Toc minDepth="2" maxDepth="2" />

<style>
h2 {
  margin: 1rem 0;
}
</style>

## 👉️ TypeScript でチャットアプリ「My Chat App」を作ろう！

---
layout: section
---

# TypeScript でチャットアプリ<br>「My Chat App」開発開始！

---

# 目次

## 1. TypeScript プロジェクトのセットアップ
## 2. Material-UI の導入と型設定
## 3. ヘッダーとレイアウトの構築
## 4. メッセージ入力フォームの作成
## 5. 基本的な状態管理の実装

※今回は TypeScript で型安全なチャットアプリを一から作成します．

<style>
h2 {
  margin-bottom: .5rem;
}
</style>

---

# 1. TypeScript プロジェクトのセットアップ

## 1.1 TypeScript React プロジェクトの作成

<div grid="~ cols-2 gap-4">
<div>

```bash
# TypeScript テンプレートでプロジェクトを作成
npm create vite@latest my-chat -- --template react-ts

# プロジェクトディレクトリに移動
cd my-chat

# 依存関係をインストール
npm install
```

</div>
<div>

📝 **TypeScript の利点：**
- コンパイル時の型チェック
- IDE での強力な自動補完
- リファクタリングの安全性
- ランタイムエラーの削減

</div>
</div>

---

## 1.2 必要なライブラリのインストール

<div grid="~ cols-2 gap-4">
<div>

```bash
# UI ライブラリ
npm install @mui/material @emotion/react @emotion/styled

# アイコン
npm install @mui/icons-material

# TypeScript 型定義（必要に応じて）
npm install --save-dev @types/node
```

</div>
<div>

📝 **各ライブラリの役割：**
- **Material-UI**: TypeScript 対応の UI コンポーネント
- **Emotion**: CSS-in-JS ライブラリ（MUI の依存関係）
- **@types/node**: Node.js の型定義

</div>
</div>

---

## 1.3 開発サーバーの起動と確認

<div grid="~ cols-2 gap-4">
<div>

```bash
# 開発サーバーを起動
npm run dev
```

ブラウザで `http://localhost:5173` にアクセスして，TypeScript + React のデフォルト画面が表示されることを確認します．

</div>
<div>

✅ **確認事項：**
- TypeScript コンパイルが正常に動作する
- ブラウザでページが表示される
- コンソールにエラーが出ていない
- HMR（Hot Module Replacement）が動作する

</div>
</div>

---

# 2. Material-UI の導入と型設定

## 2.1 Material-UI の導入

<div grid="~ cols-2 gap-4">
<div>

```tsx
// src/main.tsx
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import { ThemeProvider, createTheme } from '@mui/material/styles';
import CssBaseline from '@mui/material/CssBaseline';
import './index.css';
import App from './App';

const theme = createTheme({
  palette: {
    primary: {
      main: '#1976d2',
    },
    secondary: {
      main: '#dc004e',
    },
  },
});

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <ThemeProvider theme={theme}>
      <CssBaseline />
      <App />
    </ThemeProvider>
  </StrictMode>
);
```

</div>
<div>

📝 **設定のポイント：**
- `CssBaseline`: CSS のリセット
- `ThemeProvider`: テーマの一元管理
- TypeScript が自動的に Material-UI の型を認識

</div>
</div>

---

## 2.2 基本的なヘッダーの作成

<div grid="~ cols-2 gap-4">
<div>

```tsx
// src/App.tsx
import { Container, Typography, Box } from '@mui/material';
import './App.css';

const App = () => {
  return (
    <Container maxWidth="md" sx={{ py: 4 }}>
      <Box sx={{ textAlign: 'center', mb: 4 }}>
        <Typography variant="h3" component="h1" gutterBottom>
          💬 My Chat App
        </Typography>
        <Typography variant="subtitle1" color="text.secondary">
          TypeScript + React で作るチャットアプリ
        </Typography>
      </Box>
    </Container>
  );
};

export default App;
```

</div>
<div>

📝 **TypeScript のポイント：**
- `Container`, `Typography` 等のコンポーネントが型安全
- `sx` プロパティも型チェックされる
- アロー関数コンポーネントを使用（`React.FC` は不要）

</div>
</div>

---

## 2.3 レスポンシブ対応の追加

<div grid="~ cols-2 gap-4">
<div>

```tsx
// App.tsx の更新
const App = () => {
  return (
    <Container
      maxWidth="md"
      sx={{
        py: { xs: 2, md: 4 },
        px: { xs: 1, sm: 2 }
      }}
    >
      <Box sx={{
        textAlign: 'center',
        mb: { xs: 2, md: 4 }
      }}>
        <Typography
          variant="h3"
          component="h1"
          gutterBottom
          sx={{
            fontSize: { xs: '1.5rem', sm: '2rem', md: '3rem' }
          }}
        >
        （中略）
        <Typography
          variant="subtitle1"
          color="text.secondary"
          sx={{
            fontSize: { xs: '0.875rem', md: '1rem' }
          }}
        >
          TypeScript + React で作るチャットアプリ
        </Typography>
      </Box>
    </Container>
  );
};
```

</div>
<div>

📝 **レスポンシブ設計：**
- `xs`, `sm`, `md` でブレイクポイントを指定
- フォントサイズやスペーシングを画面サイズに応じて調整
- TypeScript が各プロパティの型をチェック

</div>
</div>

---

# 3. ヘッダーとレイアウトの構築

## 3.1 カードレイアウトの実装

<div grid="~ cols-2 gap-4">
<div>

```tsx
// App.tsx の更新
import {
  Container, Typography, Box, Card, CardContent, Paper
} from '@mui/material';

const App = () => {
  return (
    <Container maxWidth="md" sx={{ py: { xs: 2, md: 4 } }}>
      {/* ヘッダー */}
      <Box sx={{ textAlign: 'center', mb: 4 }}>
        <Typography variant="h3" component="h1" gutterBottom>
          💬 My Chat App
        </Typography>
      </Box>

      {/* メインコンテンツエリア */}
      <Card sx={{ minHeight: '500px' }}>
        <CardContent>
          <Typography variant="h6" gutterBottom>
            チャットエリア（準備中）
          </Typography>
```

</div>
<div>

```tsx
          <Paper
            sx={{
              p: 3,
              textAlign: 'center',
              backgroundColor: 'grey.50'
            }}
          >
            <Typography color="text.secondary">
              メッセージがここに表示されます
            </Typography>
          </Paper>
        </CardContent>
      </Card>
    </Container>
  );
};
```

</div>
<div>

📝 **レイアウトのポイント：**
- `Card` でメインエリアを囲む
- `Paper` で将来のメッセージ表示エリアを用意
- TypeScript が Material-UI コンポーネントの props を型チェック

📝 **準備の考え方：**
- 最初は静的なレイアウトから開始
- 後で動的な要素を段階的に追加
- 型が必要になったタイミングで定義

</div>
</div>

---

# 4. メッセージ入力フォームの作成

## 4.1 入力フォームの基本構造

<div grid="~ cols-2 gap-4">
<div>

```tsx
// App.tsx の更新
import {
  Container, Typography, Box, Card, CardContent,
  TextField, Button, Stack
} from '@mui/material';
import SendIcon from '@mui/icons-material/Send';

const App = () => {
  return (
    <Container maxWidth="md" sx={{ py: { xs: 2, md: 4 } }}>
      <Box sx={{ textAlign: 'center', mb: 4 }}>
        <Typography variant="h3" component="h1" gutterBottom>
          💬 My Chat App
        </Typography>
      </Box>

      <Card sx={{ minHeight: '500px' }}>
        <CardContent>
          {/* メッセージ表示エリア */}
          <Box sx={{ mb: 3, minHeight: '400px' }}>
```

</div>
<div>

```tsx
            <Typography color="text.secondary" sx={{ textAlign: 'center', mt: 10 }}>
              メッセージがここに表示されます
            </Typography>
          </Box>

          {/* 入力フォーム */}
          <Stack direction="row" spacing={1}>
            <TextField
              fullWidth
              placeholder="メッセージを入力..."
              variant="outlined"
              size="small"
            />
            <Button
              variant="contained"
              endIcon={<SendIcon />}
              sx={{ minWidth: '100px' }}
            >
              送信
            </Button>
          </Stack>
        </CardContent>
      </Card>
    </Container>
  );
};
```

</div>
<div>

📝 **UI 構成のポイント：**
- `Stack` で入力フィールドとボタンを横並び配置
- `TextField` は Material-UI の標準入力コンポーネント
- `Button` にアイコンを追加してユーザビリティ向上

📝 **段階的開発：**
- まずは見た目を整える
- 次に状態管理と機能を追加
- TypeScript の型は機能実装時に定義

</div>
</div>

---

## 4.2 TypeScript でのフォーム処理

実際にメッセージを管理するために必要な型と状態を追加します：

<div grid="~ cols-2 gap-4">
<div>

```tsx
// App.tsx の更新
import { useState } from 'react';
import {
  Container, Typography, Box, Card, CardContent,
  TextField, Button, Stack
} from '@mui/material';
import SendIcon from '@mui/icons-material/Send';

// メッセージの基本型（必要最小限から開始）
type Message = {
  id: number;
  text: string;
  date: string;
};

const App = () => {
  const [text, setText] = useState<string>('');
  const [messages, setMessages] = useState<Message[]>([]);
```

</div>
<div>

```tsx
  // メッセージ投稿処理
  const handlePost = (e: React.FormEvent) => {
    e.preventDefault();

    if (!text.trim()) return;

    const newMessage: Message = {
      id: Date.now(),
      text: text.trim(),
      date: new Date().toLocaleString()
    };

    setMessages(prev => [newMessage, ...prev]);
    setText('');
  };

  return (
    // JSX コンテンツは次のページで...
  );
};
```

</div>
<div>

📝 **段階的な型定義のアプローチ：**

- 最初は必要最小限の型のみ定義
- `Message` 型に `text`, `id`, `date` だけを含める
- 画像機能は次回追加時に型を拡張
- 実際に必要になったタイミングで型を追加

📝 **TypeScript の利点：**

- `useState<string>()` で型安全な状態管理
- `React.FormEvent` でイベントハンドリングの型安全性
- `Message[]` で配列の型安全性

</div>
</div>

---

## 4.3 バリデーション機能の追加

<div grid="~ cols-2 gap-4">
<div>

```tsx
// 入力変更のハンドリング
const handleTextChange = (e: React.ChangeEvent<HTMLInputElement>) => {
  setText(e.target.value);
};

// フォーム送信のハンドリング
const handlePost = (e: React.FormEvent<HTMLFormElement>) => {
  e.preventDefault();

  if (!text.trim()) {
    alert('メッセージを入力してください');
    return;
  }

  if (text.length > 1000) {
    alert('メッセージは1000文字以内で入力してください');
    return;
  }

  const newMessage: Message = {
    id: Date.now(),
    text: text.trim(),
    date: new Date().toLocaleString()
  };
```

</div>
<div>

```tsx
  setMessages(prev => [newMessage, ...prev]);
  setText('');
};

// JSX での使用
<form onSubmit={handlePost}>
  <Stack direction="row" spacing={1}>
    <TextField
      fullWidth
      value={text}
      onChange={handleTextChange}
      placeholder="メッセージを入力..."
      variant="outlined"
      size="small"
    />
    <Button
      type="submit"
      variant="contained"
      endIcon={<SendIcon />}
      disabled={!text.trim()}
      sx={{ minWidth: '100px' }}
    >
      送信
    </Button>
  </Stack>
</form>
```

</div>
<div>

📝 **型安全なイベント処理：**

- `React.ChangeEvent<HTMLInputElement>`: 入力要素の変更イベント
- `React.FormEvent<HTMLFormElement>`: フォーム送信イベント
- TypeScript が自動的にイベントオブジェクトの型をチェック

📝 **実践的な開発パターン：**

- まずは基本的な機能を実装
- 型エラーが出た箇所で適切な型を追加
- 段階的に型安全性を向上させる

</div>
</div>

---

# 5. 基本的な状態管理の実装

## 5.1 状態の型定義

実際にメッセージを管理するために必要な型を定義します：

<div grid="~ cols-2 gap-4">
<div>

```tsx
// App.tsx で必要な型を直接定義
import { useState } from 'react';

// メッセージの基本型（必要最小限から開始）
type Message = {
  id: number;
  text: string;
  date: string;
};

const App = () => {
  const [text, setText] = useState<string>('');
  const [messages, setMessages] = useState<Message[]>([]);

  // メッセージ投稿処理
  const handlePost = (e: React.FormEvent) => {
    e.preventDefault();

    if (!text.trim()) return;
```

</div>
<div>

```tsx
    const newMessage: Message = {
      id: Date.now(),
      text: text.trim(),
      date: new Date().toLocaleString()
    };

    setMessages(prev => [newMessage, ...prev]);
    setText('');
  };

  return (
    // JSX コンテンツ...
  );
};
```

</div>
<div>

📝 **段階的な型定義のアプローチ：**

- 最初は必要最小限の型のみ定義
- `Message` 型に `text`, `id`, `date` だけを含める
- 画像機能は次回追加時に型を拡張
- 実際に必要になったタイミングで型を追加

📝 **TypeScript の利点：**

- `useState<string>()` で型安全な状態管理
- `React.FormEvent` でイベントハンドリングの型安全性
- `Message[]` で配列の型安全性

</div>
</div>

---

## 5.2 型安全なイベントハンドリング

TypeScript での適切なイベントハンドリング：

<div grid="~ cols-2 gap-4">
<div>

```tsx
// 入力変更のハンドリング
const handleTextChange = (e: React.ChangeEvent<HTMLInputElement>) => {
  setText(e.target.value);
};

// フォーム送信のハンドリング
const handlePost = (e: React.FormEvent<HTMLFormElement>) => {
  e.preventDefault();

  if (!text.trim()) return;

  const newMessage: Message = {
    id: Date.now(),
    text: text.trim(),
    date: new Date().toLocaleString()
  };

  setMessages(prev => [newMessage, ...prev]);
  setText('');
};
```

</div>
<div>

```tsx
// JSX での使用
<form onSubmit={handlePost}>
  <TextField
    value={text}
    onChange={handleTextChange}
    placeholder="メッセージを入力..."
  />
  <Button type="submit">送信</Button>
</form>
```

</div>
<div>

📝 **型安全なイベント処理：**

- `React.ChangeEvent<HTMLInputElement>`: 入力要素の変更イベント
- `React.FormEvent<HTMLFormElement>`: フォーム送信イベント
- TypeScript が自動的にイベントオブジェクトの型をチェック

📝 **実践的な開発パターン：**

- まずは基本的な機能を実装
- 型エラーが出た箇所で適切な型を追加
- 段階的に型安全性を向上させる

</div>
</div>

---

# 6. 動作確認とまとめ

## 6.1 現在の実装状況

本日実装した機能の確認：

<v-clicks>

✅ **完成した機能：**
- TypeScript プロジェクトのセットアップ
- Material-UI の導入と基本テーマ設定
- レスポンシブ対応のヘッダーとレイアウト
- メッセージ入力フォームの基本機能
- 型安全な状態管理の実装

📝 **TypeScript の活用ポイント：**
- 基本的な型定義（Message 型）
- イベントハンドラーの型安全性
- Material-UI コンポーネントの型チェック
- useState での型指定

</v-clicks>

---

## 6.2 次回の予定

次回は更なる機能追加を行います：

<v-clicks>

🚀 **次回実装予定：**
- メッセージの表示機能
- 画像アップロード機能（この時点で Message 型を拡張）
- リアルタイムプレビュー
- より高度な TypeScript 型活用

📝 **型定義の発展：**
- 画像機能追加時に `Message` 型に `image?` プロパティを追加
- ファイル処理のための新しい型定義
- エラーハンドリングの型安全性向上

</v-clicks>

---

## 6.3 今日の宿題 📚

<v-clicks>

1. **今日作成したプロジェクトでいろいろ試してみる**
   - Material-UI の他のコンポーネントを試す
   - TypeScript の型エラーを意図的に発生させて理解を深める

2. **TypeScript の基本復習**
   - TypeScript 公式ドキュメントの「Basic Types」を読む
   - React コンポーネントでの型定義について調べる

3. **Material-UI について学習**
   - 公式ドキュメントでコンポーネントの使い方を確認
   - テーマシステムについて理解する

</v-clicks>

---
layout: section
---

# お疲れさまでした！ 🎉

## 次回はメッセージ機能を実装します！