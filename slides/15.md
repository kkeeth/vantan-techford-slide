---
theme: default
background: https://picsum.photos/1920/1080
class: text-center
highlighter: shiki
lineNumbers: true
info: |
  ## TypeScript + React ハンズオン講座
  第15回：チャットアプリ開発（プロジェクトセットアップと基本UI編）
fonts:
  sans: "Josefin Sans"
  serif: "Noto Sans JP"
  mono: "Fira Code"

drawings:
  persist: false
transition: slide-left
title: TypeScript/React 入門講義
---

# TypeScript + React<br>ハンズオン講座

## 第15回：チャットアプリ開発<br>プロジェクトセットアップと基本UI編

<div class="pt-12">
  <span @click="$slidev.nav.next" class="px-2 py-1 rounded cursor-pointer" hover="bg-white bg-opacity-10">
    Press Space for next page <carbon:arrow-right class="inline"/>
  </span>
</div>

<div class="abs-br m-6 flex gap-2">
  <button @click="$slidev.nav.openInEditor()" title="Open in Editor" class="text-xl slidev-icon-btn opacity-50 !border-none !hover:text-white">
    <carbon:edit />
  </button>
</div>

<style>
h1 {
  background-color: #fff;
  background-image: none;
}
</style>

---
layout: section
---

# 出席確認✋️

---
layout: default
---

# 本日の内容

<Toc minDepth="2" maxDepth="2" />

<style>
h2 {
  margin: 1rem 0;
}
</style>

## 👉️ TypeScript でチャットアプリ「My Chat App」を作ろう！

---
layout: section
---

# TypeScript でチャットアプリ<br>「My Chat App」開発開始！

---

# 目次

## 1. TypeScript プロジェクトのセットアップ
## 2. Material-UI の導入と型設定
## 3. 基本型定義の作成
## 4. ヘッダーとレイアウトの構築
## 5. メッセージ入力フォームの作成

※今回は TypeScript で型安全なチャットアプリを一から作成します．

<style>
h2 {
  margin-bottom: .5rem;
}
</style>

---

# 1. TypeScript プロジェクトのセットアップ

## 1.1 TypeScript React プロジェクトの作成

<div grid="~ cols-2 gap-4">
<div>

```bash
# TypeScript テンプレートでプロジェクトを作成
npm create vite@latest my-chat -- --template react-ts

# プロジェクトディレクトリに移動
cd my-chat

# 依存関係をインストール
npm install
```

</div>
<div>

📝 **TypeScript の利点：**
- コンパイル時の型チェック
- IDE での強力な自動補完
- リファクタリングの安全性
- ランタイムエラーの削減

</div>
</div>

---

## 1.2 必要なライブラリのインストール

<div grid="~ cols-2 gap-4">
<div>

```bash
# UI ライブラリ
npm install @mui/material @emotion/react @emotion/styled

# アイコン
npm install @mui/icons-material

# TypeScript 型定義（必要に応じて）
npm install --save-dev @types/node
```

</div>
<div>

📝 **各ライブラリの役割：**
- **Material-UI**: TypeScript 対応の UI コンポーネント
- **Emotion**: CSS-in-JS ライブラリ（MUI の依存関係）
- **@types/node**: Node.js の型定義

</div>
</div>

---

## 1.3 開発サーバーの起動と確認

<div grid="~ cols-2 gap-4">
<div>

```bash
# 開発サーバーを起動
npm run dev
```

ブラウザで `http://localhost:5173` にアクセスして，TypeScript + React のデフォルト画面が表示されることを確認します．

</div>
<div>

✅ **確認事項：**
- TypeScript コンパイルが正常に動作する
- ブラウザでページが表示される
- コンソールにエラーが出ていない
- HMR（Hot Module Replacement）が動作する

</div>
</div>

---

# 2. プロジェクト構造の確認

## 2.1 TypeScript プロジェクトのファイル構造

<div grid="~ cols-2 gap-4">
<div>

```
my-chat/
├── src/
│   ├── App.tsx
│   ├── App.css
│   ├── index.css
│   ├── main.tsx
│   └── vite-env.d.ts
├── public/
├── eslint.config.js
├── index.html
├── package.json
├── tsconfig.json
├── tsconfig.node.json
└── vite.config.ts
```

</div>
<div>

📝 **TypeScript 固有ファイル：**
- `*.tsx`: TypeScript + JSX ファイル
- `tsconfig.json`: TypeScript の設定
- `tsconfig.node.json`: Node.js 用設定
- `vite.config.ts`: Vite の TypeScript 設定

</div>
</div>

---

## 2.2 tsconfig.json の確認

<div grid="~ cols-2 gap-4">
<div>

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true
  }
}
```

</div>
<div>

✅ **重要な設定：**
- `strict: true`: 厳密な型チェック
- `jsx: "react-jsx"`: 新しい JSX transform
- `noUnusedLocals`: 未使用変数の検出

</div>
</div>

---

# 3. 基本型定義の作成

## 3.1 型定義ファイルの作成

まず，アプリケーション全体で使用する型を定義します：

<div grid="~ cols-2 gap-4">
<div>

```tsx
// src/types.ts
export type Message = {
  id: number;
  text: string;
  image?: string;
  date: string;
  createdAt?: Date;
};

export type Colors = {
  primary: string;
  secondary: string;
  gradient: string;
  gradientHover: string;
  surface: string;
  background: string;
};

export type MessageFormData = {
  text: string;
  image: File | null;
};

export type ValidationError = {
  field: string;
  message: string;
};
```

</div>
<div>

📝 **型定義のポイント：**
- `Message`: メッセージの基本構造
- `Colors`: カラーパレットの型安全性
- `MessageFormData`: フォームデータの管理
- `ValidationError`: エラーハンドリング

オプショナルプロパティ（`?`）で柔軟性を保ちつつ，必須フィールドで安全性を確保します．

</div>
</div>

---

## 3.2 初期ファイルの TypeScript 化

<div grid="~ cols-2 gap-4">
<div>

```tsx
// src/App.tsx
import './App.css';

const App = () => {
  return (
    <div>
      <h1>💬 My Chat App</h1>
      <p>TypeScript でチャットアプリを作成中...</p>
    </div>
  );
};

export default App;
```

</div>
<div>

📝 **TypeScript のポイント：**
- アロー関数コンポーネントを使用
- `React.FC` は使わずシンプルな型推論を活用
- プロパティがある場合は型を明示的に定義

</div>
</div>

---

## 3.3 main.tsx の設定

<div grid="~ cols-2 gap-4">
<div>

```tsx
// src/main.tsx
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import { ThemeProvider, createTheme } from '@mui/material/styles';
import CssBaseline from '@mui/material/CssBaseline';
import './index.css';
import App from './App';

const theme = createTheme();

const rootElement = document.getElementById('root');
if (!rootElement) {
  throw new Error('Failed to find the root element');
}

createRoot(rootElement).render(
  <StrictMode>
    <ThemeProvider theme={theme}>
      <CssBaseline />
      <App />
    </ThemeProvider>
  </StrictMode>,
);
```

</div>
<div>

📝 **TypeScript の安全性：**
- `getElementById` の null チェック
- 型アサーションではなく型ガードを使用
- Material-UI の型安全な設定

</div>
</div>

---

# 4. Material-UI のセットアップ

## 4.1 フォントとテーマの設定

<div grid="~ cols-2 gap-4">
<div>

```diff
<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
+   <link
+     rel="stylesheet"
+     href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
+   />
    <title>💬 My Chat App</title>
  </head>
```

</div>
<div>

📝 **Material-UI の推奨設定：**
- Roboto フォントの追加
- 日本語対応のために `lang="ja"` を設定
- アプリ名をタイトルに反映

</div>
</div>

---

## 4.2 動作確認とテストコンポーネント

<div grid="~ cols-2 gap-4">
<div>

```tsx
// src/App.tsx
import { Button, Typography, Container } from '@mui/material';
import type { Colors } from './types';
import './App.css';

const colors: Colors = {
  primary: '#3B82F6',
  secondary: '#10B981',
  gradient: 'linear-gradient(135deg, #3B82F6 0%, #10B981 100%)',
  gradientHover: 'linear-gradient(135deg, #2563EB 0%, #059669 100%)',
  surface: 'rgba(255, 255, 255, 0.95)',
  background: 'linear-gradient(135deg, #F0F9FF 0%, #ECFDF5 100%)',
};

const App = () => {
  return (
    <Container>
      <Typography variant="h3" component="h1" gutterBottom>
        💬 My Chat App
      </Typography>
      <Typography variant="body1" color="text.secondary">
        TypeScript でチャットアプリを作成中...
      </Typography>
      <Button variant="contained" sx={{ mt: 2 }}>
        テストボタン
      </Button>
    </Container>
  );
};

export default App;
```

</div>
<div>

✅ **確認事項：**
- TypeScript の型チェックが動作
- Material-UI コンポーネントが正しく表示
- Roboto フォントが適用されている
- カラー型定義が機能している

</div>
</div>

---

# 5. ヘッダーコンポーネントの作成

## 5.1 メインレイアウトの構築

<div grid="~ cols-2 gap-4">
<div>

```tsx
import {
  Container,
  Typography,
  Box,
  Paper,
} from '@mui/material';
import type { Colors } from './types';

const colors: Colors = {
  primary: '#3B82F6',
  secondary: '#10B981',
  gradient: 'linear-gradient(135deg, #3B82F6 0%, #10B981 100%)',
  gradientHover: 'linear-gradient(135deg, #2563EB 0%, #059669 100%)',
  surface: 'rgba(255, 255, 255, 0.95)',
  background: 'linear-gradient(135deg, #F0F9FF 0%, #ECFDF5 100%)',
};

const App = () => {
  return (
    <Box
      sx={{
        minHeight: '100vh',
        background: colors.background,
        py: { xs: 1, sm: 2 },
        px: { xs: 1, sm: 2 },
      }}
    >
      <Container sx={{
        maxWidth: { xs: '100%', sm: '720px' },
        px: { xs: 0, sm: 3 }
      }}>
```

</div>
<div>

📝 **レスポンシブデザイン：**
- `xs`: 0px 以上（モバイル）
- `sm`: 600px 以上（タブレット）
- `md`: 900px 以上（デスクトップ）

TypeScript により，sx プロパティも型安全に使用できます．

</div>
</div>

---

## 5.2 ヘッダー部分の実装

<div grid="~ cols-2 gap-4">
<div>

```tsx
        <Paper
          elevation={3}
          sx={{
            borderRadius: { xs: 0, sm: 4 },
            overflow: 'hidden',
            mb: { xs: 2, sm: 3 },
            background: colors.surface,
            backdropFilter: 'blur(20px)',
          }}
        >
          <Box
            sx={{
              background: colors.gradient,
              color: 'white',
              py: { xs: 2, sm: 3 },
              px: { xs: 2, sm: 3 },
              textAlign: 'center',
            }}
          >
            <Typography
              variant="h3"
              sx={{
                fontWeight: 600,
                mb: 1,
                fontSize: { xs: '1.8rem', sm: '3rem' }
              }}
            >
              💬 チャットアプリ
            </Typography>
            <Typography
              variant="subtitle1"
              sx={{
                opacity: 0.9,
                fontSize: { xs: '0.9rem', sm: '1rem' }
              }}
            >
              今の気持ちをシェアしよう
            </Typography>
          </Box>
        </Paper>
```

</div>
<div>

📝 **スタイルのポイント：**
- `elevation`: Material-UI の影の深さ
- `backdropFilter`: ガラスのような透明効果
- `borderRadius`: レスポンシブな角の丸み
- TypeScript により sx プロパティの型も安全

</div>
</div>

---

# 6. メッセージ入力フォームの作成

## 6.1 必要なコンポーネントのインポート

<div grid="~ cols-2 gap-4">
<div>

```tsx
import {
  Container,
  Typography,
  TextField,
  Stack,
  Button,
  Box,
  Paper,
  Fab,
} from '@mui/material';
import {
  Send as SendIcon,
  Image as ImageIcon,
} from '@mui/icons-material';
import type { Colors } from './types';
```

</div>
<div>

📝 **インポートするコンポーネント：**
- `TextField`: 型安全なテキスト入力
- `Stack`: レイアウト用コンポーネント
- `Button/Fab`: アクションボタン
- アイコンも TypeScript で型チェック

</div>
</div>

---

## 6.2 入力フォームの基本構造

<div grid="~ cols-2 gap-4">
<div>

```tsx
        <Paper
          elevation={2}
          sx={{
            borderRadius: { xs: 2, sm: 3 },
            p: { xs: 2, sm: 3 },
            mb: { xs: 2, sm: 3 },
            background: colors.surface,
            backdropFilter: 'blur(20px)',
            border: '1px solid rgba(59, 130, 246, 0.1)',
          }}
        >
          <Stack spacing={{ xs: 2, sm: 3 }}>
            <TextField
              label="今の気分はいかがでしょうか？"
              multiline
              fullWidth
              rows={4}
              variant="outlined"
              sx={{
                '& .MuiOutlinedInput-root': {
                  borderRadius: 2,
                  backgroundColor: 'rgba(255, 255, 255, 0.8)',
                  '&:hover fieldset': {
                    borderColor: colors.primary,
                  },
                  '&.Mui-focused fieldset': {
                    borderColor: colors.primary,
                  },
                },
                '& .MuiInputLabel-root.Mui-focused': {
                  color: colors.primary,
                },
              }}
            />
```

</div>
<div>

📝 **TextField のカスタマイズ：**
- `multiline`: 複数行入力対応
- `rows={4}`: 初期表示行数
- TypeScript により sx の型安全性を確保
- カスタムテーマカラーの適用

</div>
</div>

---

## 6.3 ボタンエリアの実装

<div grid="~ cols-2 gap-4">
<div>

```tsx
            <Box sx={{
              display: 'flex',
              gap: 2,
              alignItems: 'center',
              flexDirection: { xs: 'column', sm: 'row' }
            }}>
              <Button
                variant="outlined"
                component="label"
                startIcon={<ImageIcon />}
                sx={{
                  flex: 1,
                  width: { xs: '100%', sm: 'auto' },
                  height: 48,
                  borderRadius: 2,
                  borderColor: colors.primary,
                  color: colors.primary,
                  backgroundColor: 'rgba(255, 255, 255, 0.8)',
                  '&:hover': {
                    borderColor: colors.secondary,
                    backgroundColor: 'rgba(59, 130, 246, 0.04)',
                  },
                }}
              >
                画像を追加
                <input
                  type="file"
                  hidden
                  accept="image/*"
                />
              </Button>

              <Fab
                color="primary"
                size="large"
                sx={{
                  background: colors.gradient,
                  '&:hover': {
                    background: colors.gradientHover,
                  },
                  transition: 'all 0.3s ease',
                  transform: 'scale(1.05)',
                }}
              >
                <SendIcon />
              </Fab>
            </Box>
          </Stack>
        </Paper>
      </Container>
    </Box>
  );
};
```

</div>
<div>

📝 **レスポンシブ設計：**
- モバイル: 縦並び（`flexDirection: 'column'`）
- デスクトップ: 横並び（`flexDirection: 'row'`）

📝 **TypeScript の利点：**
- sx プロパティの型チェック
- 色定義の一貫性保証
- イベントハンドラの型安全性（次回実装）

</div>
</div>

---

# 7. 動作確認と完成

## 7.1 最終的なコードの確認

<div grid="~ cols-2 gap-4">
<div>

```tsx
import {
  Container,
  Typography,
  TextField,
  Stack,
  Button,
  Box,
  Paper,
  Fab,
} from '@mui/material';
import {
  Send as SendIcon,
  Image as ImageIcon,
} from '@mui/icons-material';
import type { Colors } from './types';
import './App.css';

const colors: Colors = {
  primary: '#3B82F6',
  secondary: '#10B981',
  gradient: 'linear-gradient(135deg, #3B82F6 0%, #10B981 100%)',
  gradientHover: 'linear-gradient(135deg, #2563EB 0%, #059669 100%)',
  surface: 'rgba(255, 255, 255, 0.95)',
  background: 'linear-gradient(135deg, #F0F9FF 0%, #ECFDF5 100%)',
};

const App = () => {
  return (
    <Box sx={{ /* メインレイアウト */ }}>
      <Container>
        {/* ヘッダー */}
        <Paper>...</Paper>

        {/* 入力フォーム */}
        <Paper>...</Paper>
      </Container>
    </Box>
  );
};

export default App;
```

</div>
<div>

✅ **完成した機能：**
- TypeScript による型安全なコンポーネント
- レスポンシブなヘッダー
- Material-UI を使った統一デザイン
- メッセージ入力フォーム
- 画像アップロードボタン
- 送信ボタン

✅ **確認事項：**
- TypeScript のコンパイルエラーがない
- レスポンシブデザインが機能している
- カラーテーマが統一されている
- ホバー効果が動作している

</div>
</div>

---

# 8. 次回の予告

## 8.1 次回の内容

<div grid="~ cols-2 gap-4">
<div>

次回は TypeScript でメッセージ投稿機能を実装していきます：

- 型安全な状態管理（useState）
- TypeScript でのメッセージ投稿機能
- フォームバリデーション
- イベントハンドラの型定義

</div>
<div>

## 8.2 今日の宿題 📚

1. 今日作成した TypeScript ベースの UI を保存しておく
2. Material-UI の他のコンポーネントと TypeScript での使用方法を調べてみる
3. TypeScript の型システムについて復習する
4. レスポンシブデザインをブラウザのデベロッパーツールで確認してみる

</div>
</div>

---
layout: section
---

# お疲れさまでした！ 🎉

## 次回はいよいよ TypeScript で機能を実装します！