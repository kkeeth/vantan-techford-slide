---
theme: default
background: https://picsum.photos/1920/1080
class: text-center
highlighter: shiki
lineNumbers: false
info: |
  ## TypeScript + React ãƒãƒ³ã‚ºã‚ªãƒ³è¬›åº§
  ç¬¬20å›ï¼šè‡ªå‹•ãƒ†ã‚¹ãƒˆå…¥é–€
fonts:
  sans: "Josefin Sans"
  serif: "Noto Sans JP"
  mono: "Fira Code"

drawings:
  persist: false
transition: slide-left
title: TypeScript/React å…¥é–€è¬›ç¾©
---

# TypeScript + React<br>ãƒãƒ³ã‚ºã‚ªãƒ³è¬›åº§

## ç¬¬20å›ï¼šè‡ªå‹•ãƒ†ã‚¹ãƒˆå…¥é–€

<div class="pt-12">
  <span @click="$slidev.nav.next" class="px-2 py-1 rounded cursor-pointer" hover="bg-white bg-opacity-10">
    Press Space for next page <carbon:arrow-right class="inline"/>
  </span>
</div>

<div class="abs-br m-6 flex gap-2">
  <button @click="$slidev.nav.openInEditor()" title="Open in Editor" class="text-xl slidev-icon-btn opacity-50 !border-none !hover:text-white">
    <carbon:edit />
  </button>
</div>

<style>
  h1 {
    color: #fff;
  }
</style>

---
layout: section
---

# å‡ºå¸­ç¢ºèªâœ‹ï¸

---
layout: default
---

# æœ¬æ—¥ã®å†…å®¹

<Toc minDepth="2" maxDepth="2" />

<style>
h2 {
  margin: 1rem 0;
}
</style>

## è‡ªå‹•ãƒ†ã‚¹ãƒˆã§ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚’å®ˆã‚ã†

---

# ç›®æ¬¡

## 1. è‡ªå‹•ãƒ†ã‚¹ãƒˆã¨ã¯
## 2. ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
## 3. æœ€åˆã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
## 4. React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
## 5. ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã®ãƒ†ã‚¹ãƒˆå®Ÿè·µ
## 6. ã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¢ºèª

â€»ä»Šå›ã¯ Vitest + React Testing Library ã‚’ä½¿ã£ã¦ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’å­¦ã³ã¾ã™.

<style>
h2 {
  margin-bottom: .5rem;
}
</style>

---

# 1. è‡ªå‹•ãƒ†ã‚¹ãƒˆã¨ã¯

## 1.1 ãªãœãƒ†ã‚¹ãƒˆãŒå¿…è¦ãªã®ã‹

<div grid="~ cols-2 gap-4">
<div>

**ãƒ†ã‚¹ãƒˆãŒãªã„ã¨...**

- ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ãŸã³ã«ä¸å®‰ã«ãªã‚‹
- ãƒã‚°ã«æ°—ã¥ã‹ãªã„ã¾ã¾ãƒªãƒªãƒ¼ã‚¹ã—ã¦ã—ã¾ã†
- ã€Œå‹•ã„ã¦ã„ã‚‹ã‹ã‚‰è§¦ã‚‰ãªã„ã€ã‚³ãƒ¼ãƒ‰ãŒå¢—ãˆã‚‹
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãŒæ€–ãã¦ã§ããªã„

**ãƒ†ã‚¹ãƒˆãŒã‚ã‚‹ã¨...**

- å¤‰æ›´ã—ã¦ã‚‚å£Šã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèªã§ãã‚‹
- ãƒã‚°ã‚’æ—©æœŸã«ç™ºè¦‹ã§ãã‚‹
- å®‰å¿ƒã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’æ”¹å–„ã§ãã‚‹
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä»£ã‚ã‚Šã«ã‚‚ãªã‚‹

</div>
<div>

ãƒ†ã‚¹ãƒˆã¯ã€Œå®‰å¿ƒã—ã¦é–‹ç™ºã‚’ç¶šã‘ã‚‹ãŸã‚ã®ä¿é™ºã€ã§ã™.

</div>
</div>

---

## 1.2 ãƒ†ã‚¹ãƒˆã®ç¨®é¡

ãƒ†ã‚¹ãƒˆã«ã¯ã„ãã¤ã‹ã®ç¨®é¡ãŒã‚ã‚Šã¾ã™ï¼ˆã“ã‚Œã‚‰ä»¥å¤–ã«ã‚‚ãŸãã•ã‚“ã‚ã‚Šã¾ã™ï¼‰:

<div grid="~ cols-2 gap-4">
<div>

`ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆå˜ä½“ãƒ†ã‚¹ãƒˆï¼‰`
- é–¢æ•°ã‚„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½ã§ãƒ†ã‚¹ãƒˆ
- å®Ÿè¡ŒãŒé€Ÿã„
- ä»Šå›ã®ãƒ¡ã‚¤ãƒ³ãƒ†ãƒ¼ãƒ

`çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆIntegration Testï¼‰`
- è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é€£æºã‚’ãƒ†ã‚¹ãƒˆ
- API ã¨ã®é€£æºãªã©ã‚‚ç¢ºèª

</div>
<div>

`E2E ãƒ†ã‚¹ãƒˆï¼ˆEnd-to-Endï¼‰`
- ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è‡ªå‹•æ“ä½œã—ã¦ãƒ†ã‚¹ãƒˆ
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œã‚’å†ç¾
- Playwright, Cypress ãªã©ã‚’ä½¿ç”¨
- å®Ÿè¡Œã«æ™‚é–“ãŒã‹ã‹ã‚‹

`VRTï¼ˆVisual Regression Testï¼‰`
- è¦‹ãŸç›®ã®å¤‰åŒ–ã‚’æ¤œå‡º
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ¯”è¼ƒ
- Chromatic, Percy ãªã©ã‚’ä½¿ç”¨

</div>
</div>

---

## 1.3 ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰

<div grid="~ cols-2 gap-4">
<div>

<img src="https://www.qbook.jp/column/assets_c/2026/02/43690f6b78e868bfa8a155bd6eb456ce_1-thumb-autoxauto-q80.webp" alt="ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰" class="h-50 mx-auto" />
ï¼ˆimage by: https://www.qbook.jp/column/1980.htmlï¼‰

**ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã®è€ƒãˆæ–¹:**
- ä¸‹å±¤ã»ã©å¤šã, é€Ÿã, å®‰å®š
- ä¸Šå±¤ã»ã©å°‘ãªã, é…ã, ä¸å®‰å®š

</div>
<div>

**ä»Šå›å­¦ã¶ã®ã¯ã€Œãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã€**

ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã¯:
- å®Ÿè¡ŒãŒé«˜é€Ÿï¼ˆæ•°ç§’ã€œæ•°åç§’ï¼‰
- å•é¡Œç®‡æ‰€ãŒç‰¹å®šã—ã‚„ã™ã„
- æ›¸ãã‚„ã™ã, ä¿å®ˆã—ã‚„ã™ã„
- CI/CD ã§æ¯å›å®Ÿè¡Œã§ãã‚‹

ã¾ãšã¯ã“ã“ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†!

</div>
</div>

---

# 2. ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

## 2.1 Vitest ã¨ã¯

<div grid="~ cols-2 gap-4">
<div>

**Vitest** ã¯ Vite ãƒ™ãƒ¼ã‚¹ã®é«˜é€Ÿãªãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™.

**ç‰¹å¾´:**
- Vite ã¨åŒã˜è¨­å®šã‚’å…±æœ‰ã§ãã‚‹
- Jest äº’æ›ã® API
- TypeScript ã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µãƒãƒ¼ãƒˆ
- HMR ã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆã®é«˜é€Ÿå†å®Ÿè¡Œ
- ESM ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®è¨­è¨ˆ

</div>
<div>

**ãªãœ Jest ã§ã¯ãªã Vitest?**

- Vite ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã®ç›¸æ€§ãŒæŠœç¾¤
- è¨­å®šãŒã‚·ãƒ³ãƒ—ãƒ«
- ESM ã®ã‚µãƒãƒ¼ãƒˆãŒè‰¯ã„
- å®Ÿè¡Œé€Ÿåº¦ãŒé€Ÿã„

```bash
# Jest vs Vitest ã®å®Ÿè¡Œé€Ÿåº¦
Jest:    ~5ç§’
Vitest:  ~1ç§’
```

</div>
</div>

---

## 2.2 å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™:

```bash
cd assets/chat

# Vitest ã¨ Testing Library ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -D vitest @testing-library/react @testing-library/jest-dom @testing-library/user-event jsdom
```

---

## 2.2 å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆç¶šãï¼‰

**ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®èª¬æ˜:**

| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | å½¹å‰² |
|-----------|------|
| `vitest` | ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯æœ¬ä½“ |
| `@testing-library/react` | React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ |
| `@testing-library/jest-dom` | DOM ã«å¯¾ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒãƒãƒ£ãƒ¼ |
| `@testing-library/user-event` | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ |
| `jsdom` | ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã‚’ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ |

---

## 2.3 Vitest ã®è¨­å®š

<div grid="~ cols-2 gap-4">
<div>

**vite.config.ts ã‚’æ›´æ–°:**

```diff
  // vite.config.ts
+ /// <reference types="vitest/config" />
  import { defineConfig } from 'vite';
  import react from '@vitejs/plugin-react';

  export default defineConfig({
    plugins: [react()],
+   test: {
+     globals: true,
+     environment: 'jsdom',
+     setupFiles: './src/test/setup.ts',
+     css: true,
+   },
  });
```

</div>
<div>

**è¨­å®šã®èª¬æ˜:**

- `globals: true` - describe, it, expect ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«
- `environment: 'jsdom'` - ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã‚’ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
- `setupFiles` - ãƒ†ã‚¹ãƒˆå‰ã«å®Ÿè¡Œã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
- `css: true` - CSS ã‚’ãƒ†ã‚¹ãƒˆæ™‚ã‚‚å‡¦ç†

</div>
</div>

---

## 2.4 ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

<div grid="~ cols-2 gap-4">
<div>

`src/test/setup.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ:

```ts
// src/test/setup.ts
import '@testing-library/jest-dom';
```

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ `jest-dom` ã®ã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒãƒãƒ£ãƒ¼ã‚’èª­ã¿è¾¼ã¿ã¾ã™.

**ã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒãƒãƒ£ãƒ¼ã®ä¾‹:**
- `toBeInTheDocument()`
- `toBeVisible()`
- `toHaveTextContent()`
- `toBeDisabled()`

</div>
<div>

**TypeScript ã®å‹å®šç¾©ã‚’è¿½åŠ :**

```diff
// tsconfig.app.json
{
  "compilerOptions": {
+   "types": ["vitest/globals"]
  }
}
```

ã“ã‚Œã§ `describe`, `it`, `expect` ãªã©ã®å‹ãŒèªè­˜ã•ã‚Œã¾ã™.

</div>
</div>

---

## 2.5 package.json ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¿½åŠ 

```diff
// package.json
{
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "lint": "eslint src --ext ts,tsx",
-   "preview": "vite preview"
+   "preview": "vite preview",
+   "test": "vitest",
+   "test:run": "vitest run",
+   "test:coverage": "vitest run --coverage"
  }
}
```

**ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èª¬æ˜:**
- `npm test` - ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’ç›£è¦–ï¼‰
- `npm run test:run` - ãƒ†ã‚¹ãƒˆã‚’1å›ã ã‘å®Ÿè¡Œ
- `npm run test:coverage` - ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆä»˜ãã§å®Ÿè¡Œ

---

# 3. æœ€åˆã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã

## 3.1 ãƒ†ã‚¹ãƒˆã®åŸºæœ¬æ§‹é€ 

<div grid="~ cols-2 gap-4">
<div>

```ts
// src/utils/sample.ts
export const add = (a: number, b: number): number => a + b;
```

```ts
// src/utils/sample.test.ts
import { describe, it, expect } from 'vitest';
import { add } from './sample';

describe('add é–¢æ•°', () => {
  it('2ã¤ã®æ•°å€¤ã‚’è¶³ã—ç®—ã§ãã‚‹', () => {
    const result = add(1, 2);
    expect(result).toBe(3);
  });

  it('è² ã®æ•°ã‚‚æ‰±ãˆã‚‹', () => {
    const result = add(-1, 1);
    expect(result).toBe(0);
  });
});
```

</div>
<div>

**ãƒ†ã‚¹ãƒˆã®3ã¤ã®è¦ç´ :**

1. **describe** - ãƒ†ã‚¹ãƒˆã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
2. **it** (ã¾ãŸã¯ `test`) - å€‹åˆ¥ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
3. **expect** - çµæœã‚’æ¤œè¨¼

**AAA ãƒ‘ã‚¿ãƒ¼ãƒ³:**
- **Arrange** - æº–å‚™ï¼ˆãƒ‡ãƒ¼ã‚¿ã‚„çŠ¶æ…‹ã‚’ç”¨æ„ï¼‰
- **Act** - å®Ÿè¡Œï¼ˆãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚’å‘¼ã³å‡ºã™ï¼‰
- **Assert** - æ¤œè¨¼ï¼ˆçµæœã‚’ç¢ºèªï¼‰

</div>
</div>

---

## 3.2 ã‚ˆãä½¿ã† Matcher

<div grid="~ cols-2 gap-4">
<div>

**åŸºæœ¬çš„ãª Matcher:**

```ts
// ç­‰ä¾¡æ€§
expect(value).toBe(3);           // å³å¯†ç­‰ä¾¡
expect(value).not.toBe(3);       // å¦å®š
expect(obj).toEqual({ a: 1 });   // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ¯”è¼ƒ

// çœŸå½å€¤
expect(value).toBeTruthy();
expect(value).toBeFalsy();
expect(value).toBeNull();
expect(value).toBeUndefined();

// æ•°å€¤
expect(value).toBeGreaterThan(3);
expect(value).toBeLessThan(10);
```

</div>
<div>

**æ–‡å­—åˆ—ãƒ»é…åˆ—ãƒ»ä¾‹å¤–:**

```ts
// æ–‡å­—åˆ—
expect(str).toContain('hello');
expect(str).toMatch(/pattern/);

// é…åˆ—
expect(arr).toContain(item);
expect(arr).toHaveLength(3);

// ä¾‹å¤–
expect(() => fn()).toThrow();
expect(() => fn()).toThrow('error message');
```

ãã®ä¸­ã§ã‚‚ç‰¹ã«ã‚ˆãä½¿ã†ã®ã¯ `toBe, not.toBe, toThrow` ã«ãªã‚‹ã¨æ€ã„ã¾ã™ï¼

</div>
</div>

---

## 3.3 å®Ÿè·µ: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®ãƒ†ã‚¹ãƒˆ

ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã® `validateMessage` é–¢æ•°ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã—ã‚‡ã†:

<div grid="~ cols-2 gap-4">
<div>

**ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®é–¢æ•°:**

```ts
// src/utils/validator.ts
const MAX_MESSAGE_LENGTH = 140;

export const validateMessage = (str: string): string => {
  if (!str.trim()) {
    return 'å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
  }
  if (str.length > MAX_MESSAGE_LENGTH) {
    return `${MAX_MESSAGE_LENGTH} æ–‡å­—ä»¥å†…ã§å…¥åŠ›`;
  }
  return '';
};
```

</div>
<div>

**ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ï¼ˆå•é¡Œã‚ã‚Šï¼‰:**

```ts
// src/utils/validator.test.ts
import { describe, it, expect } from 'vitest';
import { validateMessage } from './validator';

describe('validateMessage', () => {
  it('ç©ºæ–‡å­—ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™', () => {
    expect(validateMessage('')).toBe('å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
  });

  it('141æ–‡å­—ä»¥ä¸Šã¯ã‚¨ãƒ©ãƒ¼', () => {
    const text = 'a'.repeat(141);
    expect(validateMessage(text)).toContain('140');
    expect(validateMessage(text)).toBe('140 æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„');
  });

  it('æ­£å¸¸ãªå…¥åŠ›ã®å ´åˆã¯ç©ºæ–‡å­—ã‚’è¿”ã™', () => {
    expect(validateMessage('ã“ã‚“ã«ã¡ã¯')).toBe('');
  });
});
```

</div>
</div>

---

## 3.3 ã“ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å•é¡Œç‚¹

<div grid="~ cols-2 gap-4">
<div>

**ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ã®å•é¡Œ:**

```ts
// âŒ 140, 141 ãŒãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹
it('141æ–‡å­—ä»¥ä¸Šã¯ã‚¨ãƒ©ãƒ¼', () => {
  const text = 'a'.repeat(141);  // ãªãœ 141?
  expect(validateMessage(text)).toContain('140');
});
```

- `141` ã®æ„å‘³ãŒã‚³ãƒ¼ãƒ‰ã‹ã‚‰èª­ã¿å–ã‚Œãªã„
- ä»•æ§˜å¤‰æ›´æ™‚ã«ãƒ†ã‚¹ãƒˆã¨å®Ÿè£…ã®ä¸¡æ–¹ã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- ä¸æ•´åˆãŒèµ·ãã‚„ã™ã„

</div>
<div>

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ™ã‚¿æ›¸ãå•é¡Œ:**

```ts
// âŒ ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç›´æ¥æ›¸ã„ã¦ã„ã‚‹
it('ç©ºæ–‡å­—ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™', () => {
  expect(validateMessage(''))
    .toBe('å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
});
```

- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¤‰æ›´ã™ã‚‹ã¨å…¨ãƒ†ã‚¹ãƒˆã‚’ä¿®æ­£
- ã‚¿ã‚¤ãƒãŒã‚ã£ã¦ã‚‚æ°—ã¥ãã«ãã„
- å®Ÿè£…ã¨ãƒ†ã‚¹ãƒˆã®äºŒé‡ç®¡ç†ã«ãªã‚‹

</div>
</div>

**â†’ ãƒ†ã‚¹ã‚¿ãƒ–ãƒ«ãªã‚³ãƒ¼ãƒ‰ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã—ã‚‡ã†!**

---

## 3.4 ãƒ†ã‚¹ã‚¿ãƒ–ãƒ«ãªã‚³ãƒ¼ãƒ‰ã¸ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

å®šæ•°ã¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦, ãƒ†ã‚¹ãƒˆã‹ã‚‰å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™:

<div grid="~ cols-2 gap-4">
<div>

```diff
// src/utils/validator.ts
- const MAX_MESSAGE_LENGTH = 140;
+ export const MAX_MESSAGE_LENGTH = 140;

+ export const ERROR_MESSAGES = {
+   EMPTY: 'å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
+   TOO_LONG: `${MAX_MESSAGE_LENGTH} æ–‡å­—ä»¥å†…ã§å…¥åŠ›`,
+ } as const;

  export const validateMessage = (str: string): string => {
    if (!str.trim()) {
-     return 'å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
+     return ERROR_MESSAGES.EMPTY;
    }
    if (str.length > MAX_MESSAGE_LENGTH) {
-     return `${MAX_MESSAGE_LENGTH} æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„`;
+     return ERROR_MESSAGES.TOO_LONG;
    }
    return '';
  };
```

</div>
<div>

**ãƒã‚¤ãƒ³ãƒˆ:**

- å®šæ•°ã‚’ `export` ã—ã¦ãƒ†ã‚¹ãƒˆã‹ã‚‰å‚ç…§å¯èƒ½ã«
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¾ã¨ã‚ã‚‹
- `as const` ã§å‹ã‚’å³å¯†ã«

**ãƒ¡ãƒªãƒƒãƒˆ:**
- ä»•æ§˜å¤‰æ›´ã¯1ç®‡æ‰€ã ã‘ä¿®æ­£ã™ã‚Œã°OK
- ãƒ†ã‚¹ãƒˆã¨å®Ÿè£…ã®æ•´åˆæ€§ãŒä¿ãŸã‚Œã‚‹
- ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã‚‚å†åˆ©ç”¨å¯èƒ½

</div>
</div>

---

## 3.4 ãƒ†ã‚¹ã‚¿ãƒ–ãƒ«ãªã‚³ãƒ¼ãƒ‰ã¸ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆç¶šãï¼‰

<div grid="~ cols-2 gap-4">
<div>

```diff
  // src/utils/validator.test.ts
  import { describe, it, expect } from 'vitest';
- import { validateMessage, validateFile } from './validator';
+ import {
+   validateMessage,
+   validateFile,
+   MAX_MESSAGE_LENGTH,
+   ERROR_MESSAGES,
+ } from './validator';

  describe('validateMessage', () => {
    it('ç©ºæ–‡å­—ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™', () => {
-     expect(validateMessage('')).toBe('å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
+     expect(validateMessage('')).toBe(ERROR_MESSAGES.EMPTY);
    });

-   it('141æ–‡å­—ä»¥ä¸Šã¯ã‚¨ãƒ©ãƒ¼', () => {
+   it(`${MAX_MESSAGE_LENGTH}æ–‡å­—ä»¥ä¸Šã¯ã‚¨ãƒ©ãƒ¼`, () => {
-     const text = 'a'.repeat(141);
+     const text = 'a'.repeat(MAX_MESSAGE_LENGTH + 1);
-     expect(validateMessage(text)).toContain('140');
-     expect(validateMessage(text)).toBe('140 æ–‡å­—ä»¥å†…ã§
+     expect(validateMessage(text)).toContain(MAX_MESSAGE_LENGTH);
+     expect(validateMessage(text)).toBe(ERROR_MESSAGE_.TOO_LONG)
    });
```

</div>
<div>

**æ”¹å–„ç‚¹:**
- `MAX_MESSAGE_LENGTH + 1` ã§æ„å›³ãŒæ˜ç¢º
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯å®šæ•°ã‚’å‚ç…§
- ä»•æ§˜å¤‰æ›´ã«å¼·ã„ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰

</div>
</div>

---

## 3.5 validateFile é–¢æ•°ã‚‚ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

validateFile é–¢æ•°ã‚‚åŒæ§˜ã«å®šæ•°ã¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã™:

<div grid="~ cols-2 gap-4">
<div>

```diff
  // src/utils/validator.ts
- const MAX_SIZE = 5 * 1024 * 1024; // 5MB
- const MAX_FILENAME_LENGTH = 100;
+ export const MAX_SIZE = 5 * 1024 * 1024; // 5MB
+ export const MAX_FILENAME_LENGTH = 100;

+ export const FILE_ERROR_MESSAGES = {
+   INVALID_TYPE: 'JPEG, PNG, GIF ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯èƒ½ã§ã™',
+   TOO_LARGE: `ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãã™ãã¾ã™ï¼ˆæœ€å¤§${MAX_SIZE / (1024 * 1024)}MBï¼‰`,
+   NAME_TOO_LONG: 'ãƒ•ã‚¡ã‚¤ãƒ«åãŒé•·ã™ãã¾ã™',
+ } as const;

  export const validateFile = (file: File): string => {
    if (!ALLOWED_TYPES.includes(file.type)) {
-     return 'JPEG, PNG, GIF ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯èƒ½ã§ã™';
+     return FILE_ERROR_MESSAGES.INVALID_TYPE;
    }
    // ...ä»¥ä¸‹ï¼ŒåŒæ§˜ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å®šæ•°ã§ç½®æ›
  };
```

</div>
<div>

| å®šæ•°å | å€¤ | ç”¨é€” |
|--------|-----|------|
| `MAX_SIZE` | 5MB | ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºä¸Šé™ |
| `MAX_FILENAME_LENGTH` | 100 | ãƒ•ã‚¡ã‚¤ãƒ«åé•·ä¸Šé™ |
| `ALLOWED_TYPES` | é…åˆ— | è¨±å¯ã™ã‚‹ MIME ã‚¿ã‚¤ãƒ— |

**ãƒ¡ãƒªãƒƒãƒˆ:**
- ãƒ†ã‚¹ãƒˆã§ `MAX_SIZE + 1` ã®ã‚ˆã†ã«å¢ƒç•Œå€¤ã‚’è¡¨ç¾
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®äºŒé‡ç®¡ç†ã‚’é˜²æ­¢
- ä»•æ§˜å¤‰æ›´æ™‚ã«1ç®‡æ‰€ã ã‘ä¿®æ­£

</div>
</div>

---

## 3.6 validateFile ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰

<div grid="~ cols-2 gap-4">
<div>

```diff
// src/utils/validator.test.ts
  import {
    validateMessage,
+   validateFile,
    MAX_MESSAGE_LENGTH,
+   MAX_SIZE,
+   MAX_FILENAME_LENGTH,
    ERROR_MESSAGES,
+   FILE_ERROR_MESSAGES,
  } from './validator';

+ describe('validateFile', () => {
+   const overSizedImage = new File(
+     [new ArrayBuffer(MAX_SIZE + 1)],
+     'large.png',
+     { type: 'image/png' }
+   );
+
+   const longNameImage = new File(
+     ['dummy'],
+     'a'.repeat(MAX_FILENAME_LENGTH + 1) + '.png',
+     { type: 'image/png' }
+   );
```

</div>
<div>

```diff
+   it('å¯¾è±¡å¤–ã®æ‹¡å¼µå­ã¯ã‚¨ãƒ©ãƒ¼', () => {
+     const webpImage = new File(
+       ['dummy'], 'test.webp',
+       { type: 'image/webp' }
+     );
+     expect(validateFile(webpImage))
+       .toBe(FILE_ERROR_MESSAGES.INVALID_TYPE);
+   });
+
+   it('ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºè¶…éã¯ã‚¨ãƒ©ãƒ¼', () => {
+     expect(validateFile(overSizedImage))
+       .toBe(FILE_ERROR_MESSAGES.TOO_LARGE);
+   });
+
+   it('ãƒ•ã‚¡ã‚¤ãƒ«åé•·è¶…éã¯ã‚¨ãƒ©ãƒ¼', () => {
+     expect(validateFile(longNameImage))
+       .toBe(FILE_ERROR_MESSAGES.NAME_TOO_LONG);
+   });
+
+   it('æ­£å¸¸ãªãƒ•ã‚¡ã‚¤ãƒ«ã¯ç©ºæ–‡å­—ã‚’è¿”ã™', () => {
+     const validImage = new File(
+       ['dummy'], 'test.png',
+       { type: 'image/png' }
+     );
+     expect(validateFile(validImage)).toBe('');
+   });
+ });
```

</div>
</div>

---

## 3.6 ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†

**å®Ÿè¡Œçµæœ:**

```
 âœ“ src/utils/validator.test.ts (9 tests) 2ms
   âœ“ validateMessage (5)
     âœ“ ç©ºæ–‡å­—ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ 0ms
     âœ“ ç©ºç™½ã®ã¿ã®å ´åˆã‚‚ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ 0ms
     âœ“ æ­£å¸¸ãªå…¥åŠ›ã®å ´åˆã¯ç©ºæ–‡å­—ã‚’è¿”ã™ 0ms
     âœ“ 140æ–‡å­—ã¡ã‚‡ã†ã©ã¯æœ‰åŠ¹ 0ms
     âœ“ 141æ–‡å­—ä»¥ä¸Šã¯ã‚¨ãƒ©ãƒ¼ 0ms
   âœ“ validateFile (4)
     âœ“ å¯¾è±¡å¤–ã®æ‹¡å¼µå­ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ 0ms
     âœ“ ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ 0ms
     âœ“ ãƒ•ã‚¡ã‚¤ãƒ«åãŒé•·ã™ãã‚‹å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ 0ms
     âœ“ æ­£å¸¸ãªå…¥åŠ›ã®å ´åˆã¯ç©ºæ–‡å­—ã‚’è¿”ã™ 0ms

 Test Files  1 passed (1)
      Tests  9 passed (9)
   Start at  00:41:09
   Duration  304ms
```

å…¨ã¦ã®ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã—ã¾ã—ãŸ!

---

## 3.7 å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆã®é‡è¦æ€§

<div grid="~ cols-2 gap-4">
<div>

**å®šæ•°ã‚’ä½¿ã£ãŸå¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆ:**

```diff
  describe('validateMessage å¢ƒç•Œå€¤', () => {
    // ä¸­ç•¥
+   it(`${MAX_MESSAGE_LENGTH}æ–‡å­—ã¡ã‚‡ã†ã©ã¯æœ‰åŠ¹`, () => {
+     const text = 'a'.repeat(MAX_MESSAGE_LENGTH);
+     expect(validateMessage(text)).toBe('');
+   });

    it(`${MAX_MESSAGE_LENGTH + 1}æ–‡å­—ä»¥ä¸Šã¯ã‚¨ãƒ©ãƒ¼`, () => {
      const text = 'a'.repeat(MAX_MESSAGE_LENGTH + 1);
      expect(validateMessage(text)).toBe(ERROR_MESSAGES.TOO_LONG);
    });
});
```

</div>
<div>

**ãƒ†ã‚¹ãƒˆã®ãƒã‚¤ãƒ³ãƒˆ:**

**å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆ**ãŒé‡è¦ã§ã™:
- ã¡ã‚‡ã†ã© `MAX_MESSAGE_LENGTH` â†’ OK
- `MAX_MESSAGE_LENGTH + 1` â†’ NG

å¢ƒç•Œã®ã€Œä¸¡å´ã€ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ã§, ãƒã‚°ã‚’è¦‹ã¤ã‘ã‚„ã™ããªã‚Šã¾ã™.

**ã‚ˆãã‚ã‚‹ãƒã‚°:**
- `>` ã¨ `>=` ã®é–“é•ã„
- `<` ã¨ `<=` ã®é–“é•ã„

**å®šæ•°ã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆ:**
- `140` ã‚ˆã‚Š `MAX_MESSAGE_LENGTH` ãŒæ„å›³æ˜ç¢º
- ä»•æ§˜å¤‰æ›´æ™‚ã«è‡ªå‹•ã§è¿½å¾“

</div>
</div>

---

# 4. React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ

## 4.1 Testing Library ã®è€ƒãˆæ–¹

<div grid="~ cols-2 gap-4">
<div>

**Testing Library ã®å“²å­¦:**

> The more your tests resemble the way your software is used, the more confidence they can give you.
> https://x.com/kentcdodds/status/977018512689455106

ã€Œãƒ†ã‚¹ãƒˆãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½¿ã„æ–¹ã«ä¼¼ã¦ã„ã‚‹ã»ã©, ã‚ˆã‚Šä¿¡é ¼ã§ãã‚‹ã€

ã¤ã¾ã‚Šï¼Œ**å®Ÿè£…ã®è©³ç´°ã§ã¯ãªã, ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã‚‹ã‚‚ã®ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹** ã¨ã„ã†ã“ã¨ğŸ’

</div>
<div>

**æ‚ªã„ä¾‹:**

```tsx
// å®Ÿè£…ã®è©³ç´°ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã‚‹
expect(component.state.isOpen).toBe(true);
expect(wrapper.find('.internal-class')).toExist();
```

**è‰¯ã„ä¾‹:**

```tsx
// ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã‚‹ã‚‚ã®ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã‚‹
expect(screen.getByText('ãƒ¡ãƒ‹ãƒ¥ãƒ¼')).toBeVisible();
expect(screen.getByRole('button')).toBeEnabled();
```

</div>
</div>

---

## 4.2 render ã¨ screen ã®åŸºæœ¬

<div grid="~ cols-2 gap-4">
<div>

**ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ:**

```tsx
// src/components/Button.tsx
import type { ReactNode } from 'react';

type ButtonProps = {
  children: ReactNode;
  onClick?: () => void;
  disabled?: boolean;
};

export const Button = ({
  children,
  onClick,
  disabled = false,
}: ButtonProps) => (
  <button onClick={onClick} disabled={disabled}>
    {children}
  </button>
);
```

</div>
<div>

**ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰:**

```tsx
// src/components/Button.test.tsx
import { render, screen } from '@testing-library/react';
import { Button } from './Button';

describe('Button', () => {
  it('ãƒ†ã‚­ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    render(<Button>ã‚¯ãƒªãƒƒã‚¯</Button>);

    expect(screen.getByText('ã‚¯ãƒªãƒƒã‚¯'))
      .toBeInTheDocument();
  });
});
```

</div>
</div>

---

## 4.2 render ã¨ screen ã®åŸºæœ¬ï¼ˆç¶šãï¼‰

<div grid="~ cols-2 gap-4">
<div>

**ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ãƒ†ã‚¹ãƒˆ:**

```diff
// src/components/Button.test.tsx
  import { render, screen } from '@testing-library/react';
+ import userEvent from '@testing-library/user-event';
+ import { vi } from 'vitest';
  import { Button } from './Button';

  describe('Button', () => {
    // ...å‰ã®ãƒ†ã‚¹ãƒˆ

+   it('ã‚¯ãƒªãƒƒã‚¯ã§ onClick ãŒå‘¼ã°ã‚Œã‚‹', async () => {
+     const user = userEvent.setup();
+     const handleClick = vi.fn();
+
+     render(<Button onClick={handleClick}>é€ä¿¡</Button>);
+     await user.click(screen.getByRole('button'));
+
+     expect(handleClick).toHaveBeenCalled();
+     expect(handleClick).toHaveBeenCalledTimes(1);
+   });
+ });
```

</div>
<div>

**ãƒã‚¤ãƒ³ãƒˆ:**

- `userEvent.setup()` ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
- `vi.fn()` ã§ãƒ¢ãƒƒã‚¯é–¢æ•°ã‚’ä½œæˆ
- `await user.click()` ã§ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
- `toHaveBeenCalledTimes(1)` ã§å‘¼ã³å‡ºã—å›æ•°ã‚’ç¢ºèª

**ãªãœ `async/await` ãŒå¿…è¦?**

`userEvent` ã¯å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚’å†ç¾ã™ã‚‹ãŸã‚éåŒæœŸã§å‹•ä½œã—ã¾ã™. `await` ã‚’å¿˜ã‚Œã‚‹ã¨ãƒ†ã‚¹ãƒˆãŒæ­£ã—ãå‹•ä½œã—ã¾ã›ã‚“.

</div>
</div>

---

## 4.2 render ã¨ screen ã®åŸºæœ¬ï¼ˆç¶šãï¼‰


**disabled æ™‚ã®ãƒ†ã‚¹ãƒˆ:**

```tsx
it('disabled æ™‚ã¯ã‚¯ãƒªãƒƒã‚¯ã§ããªã„', async () => {
  const user = userEvent.setup();
  const handleClick = vi.fn();

  render(
    <Button onClick={handleClick} disabled>
      é€ä¿¡
    </Button>
  );

  // disabled ãªãƒœã‚¿ãƒ³ã¯ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚åå¿œã—ãªã„
  await user.click(screen.getByRole('button'));

  expect(handleClick).not.toHaveBeenCalled();
});

it('disabled æ™‚ã¯ disabled å±æ€§ãŒã‚ã‚‹', () => {
  render(<Button disabled>é€ä¿¡</Button>);

  expect(screen.getByRole('button')).toBeDisabled();
});
```

---

## 4.2 render ã¨ screen ã®åŸºæœ¬ï¼ˆç¶šãï¼‰

<div grid="~ cols-2 gap-4">
<div>

**ã‚ˆãä½¿ã†ã‚¯ã‚¨ãƒª:**

| ã‚¯ã‚¨ãƒª | ç”¨é€” |
|--------|------|
| `getByText` | ãƒ†ã‚­ã‚¹ãƒˆã§æ¤œç´¢ |
| `getByRole` | ãƒ­ãƒ¼ãƒ«ï¼ˆå½¹å‰²ï¼‰ã§æ¤œç´¢ |
| `getByPlaceholderText` | placeholder ã§æ¤œç´¢ |
| `getByTestId` | data-testid ã§æ¤œç´¢ |

</div>
<div>

**ã‚ˆãä½¿ã†ãƒãƒƒãƒãƒ£ãƒ¼:**

| ãƒãƒƒãƒãƒ£ãƒ¼ | ç”¨é€” |
|-----------|------|
| `toBeInTheDocument()` | DOM ã«å­˜åœ¨ã™ã‚‹ |
| `toBeDisabled()` | disabled çŠ¶æ…‹ |
| `toBeEnabled()` | enabled çŠ¶æ…‹ |
| `toHaveBeenCalled()` | é–¢æ•°ãŒå‘¼ã°ã‚ŒãŸ |

</div>
</div>

---

## 4.3 ã‚¯ã‚¨ãƒªã®ç¨®é¡

<div grid="~ cols-2 gap-4">
<div>

**`getBy` vs `queryBy` vs` findBy`:**

```tsx
// getBy - è¦ç´ ãŒãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼
const button = screen.getByText('é€ä¿¡');

// queryBy - è¦ç´ ãŒãªã„å ´åˆã¯ null
const error = screen.queryByText('ã‚¨ãƒ©ãƒ¼');
expect(error).toBeNull();

// findBy - éåŒæœŸã§è¦ç´ ã‚’å¾…ã¤
const message = await screen.findByText('å®Œäº†');
```

</div>
<div>

**ä½¿ã„åˆ†ã‘:**

| ã‚¯ã‚¨ãƒª | è¦ç´ ãªã— | ç”¨é€” |
|--------|----------|------|
| getBy | ã‚¨ãƒ©ãƒ¼ | å¿…ãšå­˜åœ¨ã™ã‚‹è¦ç´  |
| queryBy | null | å­˜åœ¨ã—ãªã„ã“ã¨ã‚’ç¢ºèª |
| findBy | å¾…æ©Ÿ | éåŒæœŸã§è¡¨ç¤ºã•ã‚Œã‚‹è¦ç´  |

**All ä»˜ãã®ã‚¯ã‚¨ãƒª:**
- `getAllByText` - è¤‡æ•°ã®è¦ç´ ã‚’å–å¾—
- `queryAllByRole` - è¤‡æ•°ã®è¦ç´ ã‚’å–å¾—ï¼ˆnull ã§ã¯ãªãç©ºé…åˆ—ï¼‰

</div>
</div>

---

## 4.4 ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ

<div grid="~ cols-2 gap-4">
<div>

**user-event ã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆ:**

```tsx
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { Counter } from './Counter';

describe('Counter', () => {
  it('ã‚¯ãƒªãƒƒã‚¯ã§ã‚«ã‚¦ãƒ³ãƒˆãŒå¢—ãˆã‚‹', async () => {
    const user = userEvent.setup();
    render(<Counter />);

    const button = screen.getByRole('button');
    await user.click(button);

    expect(screen.getByText('1')).toBeInTheDocument();
  });
});
```

</div>
<div>

**user-event ã®ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰:**

```tsx
const user = userEvent.setup();

// ã‚¯ãƒªãƒƒã‚¯
await user.click(element);

// ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯
await user.dblClick(element);

// ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›
await user.type(input, 'Hello');

// ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¯ãƒªã‚¢
await user.clear(input);

// ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ
await user.keyboard('{Enter}');

// ãƒ›ãƒãƒ¼
await user.hover(element);
```

</div>
</div>

---

## 4.5 ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ†ã‚¹ãƒˆ

<div grid="~ cols-2 gap-4">
<div>

**å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ†ã‚¹ãƒˆä¾‹:**

```tsx
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { LoginForm } from './LoginForm';

describe('LoginForm', () => {
  it('å…¥åŠ›å€¤ãŒåæ˜ ã•ã‚Œã‚‹', async () => {
    const user = userEvent.setup();
    render(<LoginForm />);

    const input = screen.getByPlaceholderText('ãƒ¡ãƒ¼ãƒ«');
    await user.type(input, 'test@example.com');

    expect(input).toHaveValue('test@example.com');
  });
});
```

</div>
<div>

**ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã®ãƒ†ã‚¹ãƒˆ:**

```tsx
it('é€ä¿¡ãƒœã‚¿ãƒ³ã§onSubmitãŒå‘¼ã°ã‚Œã‚‹', async () => {
  const user = userEvent.setup();
  const handleSubmit = vi.fn();

  render(<LoginForm onSubmit={handleSubmit} />);

  await user.type(
    screen.getByPlaceholderText('ãƒ¡ãƒ¼ãƒ«'),
    'test@example.com'
  );
  await user.click(screen.getByRole('button'));

  expect(handleSubmit).toHaveBeenCalledWith({
    email: 'test@example.com',
  });
});
```

</div>
</div>

---

# 5. ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã®ãƒ†ã‚¹ãƒˆå®Ÿè·µ

## 5.1 ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹æˆ

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ HighlightText.tsx
â”‚   â”œâ”€â”€ HighlightText.test.tsx    â† ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨åŒã˜å ´æ‰€ã«
â”‚   â”œâ”€â”€ SearchBar.tsx
â”‚   â””â”€â”€ SearchBar.test.tsx
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ validator.ts
â”‚   â”œâ”€â”€ validator.test.ts       â† ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã¨åŒã˜å ´æ‰€ã«
â”‚   â”œâ”€â”€ dateFormatter.ts
â”‚   â””â”€â”€ dateFormatter.test.ts
â””â”€â”€ test/
    â””â”€â”€ setup.ts                â† ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«
```

ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™.

---

## 5.2 dateFormatter ã®ãƒ†ã‚¹ãƒˆ

<div grid="~ cols-2 gap-4">
<div>

**ãƒ†ã‚¹ãƒˆå¯¾è±¡:**

```ts
// src/utils/dateFormatter.ts
export const formatRelativeTime = (date: string): string => {
  const now = new Date();
  const messageDate = new Date(date);
  const diffMs = now.getTime() - messageDate.getTime();
  const diffMins = Math.floor(diffMs / 60000);

  if (diffMins < 1) return 'ãŸã£ãŸä»Š';
  if (diffMins < 60) return `${diffMins}åˆ†å‰`;

  const diffHours = Math.floor(diffMins / 60);
  if (diffHours < 24) return `${diffHours}æ™‚é–“å‰`;

  const diffDays = Math.floor(diffHours / 24);
  if (diffDays < 7) return `${diffDays}æ—¥å‰`;

  return messageDate.toLocaleDateString('ja-JP');
};
```

</div>
<div>

**ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰:**

```ts
// src/utils/dateFormatter.test.ts
import { describe, it, expect, vi } from 'vitest';
import { formatRelativeTime } from './dateFormatter';

describe('formatRelativeTime', () => {
  it('1åˆ†æœªæº€ã¯ã€ŒãŸã£ãŸä»Šã€ã‚’è¿”ã™', () => {
    const now = new Date();
    const result = formatRelativeTime(now.toISOString());
    expect(result).toBe('ãŸã£ãŸä»Š');
  });

  it('5åˆ†å‰ã¯ã€Œ5åˆ†å‰ã€ã‚’è¿”ã™', () => {
    const fiveMinutesAgo = new Date(
      Date.now() - 5 * 60 * 1000
    );
    const result = formatRelativeTime(
      fiveMinutesAgo.toISOString()
    );
    expect(result).toBe('5åˆ†å‰');
  });
});
```

</div>
</div>

---

## 5.3 dateFormatter ã®ãƒ†ã‚¹ãƒˆï¼ˆç¶šãï¼‰

<div grid="~ cols-2 gap-4">
<div>

**æ™‚é–“ã¨æ—¥ä»˜ã®ãƒ†ã‚¹ãƒˆ:**

```ts
it('2æ™‚é–“å‰ã¯ã€Œ2æ™‚é–“å‰ã€ã‚’è¿”ã™', () => {
  const twoHoursAgo = new Date(
    Date.now() - 2 * 60 * 60 * 1000
  );
  const result = formatRelativeTime(
    twoHoursAgo.toISOString()
  );
  expect(result).toBe('2æ™‚é–“å‰');
});

it('3æ—¥å‰ã¯ã€Œ3æ—¥å‰ã€ã‚’è¿”ã™', () => {
  const threeDaysAgo = new Date(
    Date.now() - 3 * 24 * 60 * 60 * 1000
  );
  const result = formatRelativeTime(
    threeDaysAgo.toISOString()
  );
  expect(result).toBe('3æ—¥å‰');
});
```

</div>
<div>

**1é€±é–“ä»¥ä¸Šå‰ã®ãƒ†ã‚¹ãƒˆ:**

```ts
it('7æ—¥ä»¥ä¸Šå‰ã¯æ—¥ä»˜ã‚’è¿”ã™', () => {
  const tenDaysAgo = new Date(
    Date.now() - 10 * 24 * 60 * 60 * 1000
  );
  const result = formatRelativeTime(
    tenDaysAgo.toISOString()
  );

  // æ—¥ä»˜å½¢å¼ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
  expect(result).toMatch(/\d{4}\/\d{1,2}\/\d{1,2}/);
});
```

**ãƒã‚¤ãƒ³ãƒˆ:**
- å¢ƒç•Œå€¤ï¼ˆ1åˆ†, 60åˆ†, 24æ™‚é–“, 7æ—¥ï¼‰ã‚’ãƒ†ã‚¹ãƒˆ
- æ­£è¦è¡¨ç¾ã§æ—¥ä»˜å½¢å¼ã‚’ç¢ºèª

</div>
</div>

---

## 5.4 HighlightText ã®ãƒ†ã‚¹ãƒˆ

<div grid="~ cols-2 gap-4">
<div>

**ãƒ†ã‚¹ãƒˆå¯¾è±¡:**

```tsx
// src/components/HighlightText.tsx
import { Box } from '@mui/material';

type HighlightTextProps = {
  text: string;
  searchTerm: string;
};

export const HighlightText = ({
  text,
  searchTerm
}: HighlightTextProps) => {
  if (!searchTerm.trim()) {
    return <>{text}</>;
  }
  // ãƒã‚¤ãƒ©ã‚¤ãƒˆå‡¦ç†...
};
```

</div>
<div>

**ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰:**

```tsx
// src/components/HighlightText.test.tsx
import { render, screen } from '@testing-library/react';
import { HighlightText } from './HighlightText';

describe('HighlightText', () => {
  it('æ¤œç´¢èªãŒãªã„å ´åˆã¯ãƒ†ã‚­ã‚¹ãƒˆã‚’ãã®ã¾ã¾è¡¨ç¤º', () => {
    render(
      <HighlightText text="Hello World" searchTerm="" />
    );
    expect(screen.getByText('Hello World'))
      .toBeInTheDocument();
  });

  it('æ¤œç´¢èªãŒã‚ã‚‹å ´åˆã¯ãƒã‚¤ãƒ©ã‚¤ãƒˆ', () => {
    render(
      <HighlightText text="Hello World" searchTerm="World" />
    );
    expect(screen.getByText('World'))
      .toBeInTheDocument();
  });
});
```

</div>
</div>

---

## 5.5 SearchBar ã®ãƒ†ã‚¹ãƒˆ

<div grid="~ cols-2 gap-4">
<div>

**ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰:**

```tsx
// src/components/SearchBar.test.tsx
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { vi } from 'vitest';
import { SearchBar } from './SearchBar';

const mockColors = {
  primary: '#1976d2',
  secondary: '#9c27b0',
  surface: '#ffffff',
  gradient: 'linear-gradient(...)',
  gradientHover: 'linear-gradient(...)',
  background: '#f5f5f5',
};
```

</div>
<div>

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹:**

```tsx
describe('SearchBar', () => {
  it('å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    render(
      <SearchBar
        searchTerm=""
        colors={mockColors}
        onSearchChange={() => {}}
      />
    );

    expect(screen.getByPlaceholderText('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œç´¢...'))
      .toBeInTheDocument();
  });
});
```

</div>
</div>

---

## 5.6 SearchBar ã®ãƒ†ã‚¹ãƒˆï¼ˆç¶šãï¼‰

<div grid="~ cols-2 gap-4">
<div>

**å…¥åŠ›ãƒ†ã‚¹ãƒˆ:**

```tsx
it('å…¥åŠ›ã™ã‚‹ã¨onSearchChangeãŒå‘¼ã°ã‚Œã‚‹', async () => {
  const user = userEvent.setup();
  const handleChange = vi.fn();

  render(
    <SearchBar
      searchTerm=""
      colors={mockColors}
      onSearchChange={handleChange}
    />
  );

  const input = screen.getByPlaceholderText(
    'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œç´¢...'
  );
  await user.type(input, 'test');

  expect(handleChange).toHaveBeenCalled();
});
```

</div>
<div>

**ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³ã®ãƒ†ã‚¹ãƒˆ:**

```tsx
it('æ¤œç´¢èªãŒã‚ã‚‹ã¨ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
  render(
    <SearchBar
      searchTerm="test"
      colors={mockColors}
      onSearchChange={() => {}}
    />
  );

  // ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³ï¼ˆÃ—ã‚¢ã‚¤ã‚³ãƒ³ï¼‰ã‚’ç¢ºèª
  expect(screen.getByRole('button')).toBeInTheDocument();
});

it('æ¤œç´¢èªãŒãªã„ã¨ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³ã¯éè¡¨ç¤º', () => {
  render(
    <SearchBar
      searchTerm=""
      colors={mockColors}
      onSearchChange={() => {}}
    />
  );

  expect(screen.queryByRole('button')).toBeNull();
});
```

</div>
</div>

---

## 5.7 ãƒ¢ãƒƒã‚¯ã®æ´»ç”¨

<div grid="~ cols-2 gap-4">
<div>

**vi.fn() ã§ãƒ¢ãƒƒã‚¯é–¢æ•°ã‚’ä½œæˆ:**

```tsx
import { vi } from 'vitest';

// ãƒ¢ãƒƒã‚¯é–¢æ•°ã‚’ä½œæˆ
const mockFn = vi.fn();

// æˆ»ã‚Šå€¤ã‚’è¨­å®š
const mockFn = vi.fn(() => 'return value');

// ç‰¹å®šã®å¼•æ•°ã§å‘¼ã°ã‚ŒãŸã‹ç¢ºèª
expect(mockFn).toHaveBeenCalledWith('arg1', 'arg2');

// å‘¼ã³å‡ºã—å›æ•°ã‚’ç¢ºèª
expect(mockFn).toHaveBeenCalledTimes(2);
```

</div>
<div>

**ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ¢ãƒƒã‚¯:**

```tsx
// å¤–éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ¢ãƒƒã‚¯
vi.mock('uuid', () => ({
  v4: () => 'mocked-uuid-1234',
}));

// IndexedDB ã‚’ãƒ¢ãƒƒã‚¯ï¼ˆDexieï¼‰
vi.mock('dexie', () => ({
  default: class MockDexie {
    messages = {
      add: vi.fn(),
      delete: vi.fn(),
      toArray: vi.fn(() => Promise.resolve([])),
    };
  },
}));
```

</div>
</div>

---

# 6. ã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¢ºèª

## 6.1 ã‚«ãƒãƒ¬ãƒƒã‚¸ã¨ã¯

<div grid="~ cols-2 gap-4">
<div>

**ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸**ã¯, ãƒ†ã‚¹ãƒˆãŒã‚³ãƒ¼ãƒ‰ã®ã©ã‚Œã ã‘ã‚’ã‚«ãƒãƒ¼ã—ã¦ã„ã‚‹ã‹ã‚’ç¤ºã™æŒ‡æ¨™ã§ã™.

**4ã¤ã®æŒ‡æ¨™:**
- **Statements** - æ–‡ã®ã‚«ãƒãƒ¬ãƒƒã‚¸
- **Branches** - åˆ†å²ã®ã‚«ãƒãƒ¬ãƒƒã‚¸
- **Functions** - é–¢æ•°ã®ã‚«ãƒãƒ¬ãƒƒã‚¸
- **Lines** - è¡Œã®ã‚«ãƒãƒ¬ãƒƒã‚¸

</div>
<div>

**ä¾‹:**

```ts
function example(x: number) {  // â† Functions
  if (x > 0) {                 // â† Branches (åˆ†å²1)
    return 'positive';         // â† Statements, Lines
  } else {                     // â† Branches (åˆ†å²2)
    return 'non-positive';     // â† Statements, Lines
  }
}

// ãƒ†ã‚¹ãƒˆã§ x > 0 ã®ã‚±ãƒ¼ã‚¹ã—ã‹ãƒ†ã‚¹ãƒˆã—ãªã„å ´åˆ:
// - Branches: 50% (2åˆ†å²ä¸­1åˆ†å²ã®ã¿)
```

</div>
</div>

---

## 6.2 ã‚«ãƒãƒ¬ãƒƒã‚¸ã®è¨­å®š

<div grid="~ cols-2 gap-4">
<div>

**ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:**

```bash
npm install -D @vitest/coverage-v8
```

**vite.config.ts ã«è¨­å®šã‚’è¿½åŠ :**

```ts
export default defineConfig({
  // ...
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './src/test/setup.ts',
    coverage: {
      provider: 'v8',
      reporter: ['text', 'html'],
      exclude: ['node_modules/', 'src/test/'],
    },
  },
});
```

</div>
<div>

**è¨­å®šã®èª¬æ˜:**

- `provider: 'v8'` - V8 ã‚¨ãƒ³ã‚¸ãƒ³ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ä½¿ç”¨
- `reporter` - å‡ºåŠ›å½¢å¼
  - `text` - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è¡¨ç¤º
  - `html` - HTML ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
- `exclude` - ã‚«ãƒãƒ¬ãƒƒã‚¸ã‹ã‚‰é™¤å¤–ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«

</div>
</div>

---

## 6.3 ã‚«ãƒãƒ¬ãƒƒã‚¸ã®å®Ÿè¡Œ

```bash
npm run test:coverage
```

**ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å‡ºåŠ›ä¾‹:**

```
 % Coverage report from v8
-----------------------|---------|----------|---------|---------|
File                   | % Stmts | % Branch | % Funcs | % Lines |
-----------------------|---------|----------|---------|---------|
All files              |   78.26 |    66.67 |   85.71 |   78.26 |
 utils                 |     100 |      100 |     100 |     100 |
  dateFormatter.ts     |     100 |      100 |     100 |     100 |
  validator.ts         |     100 |      100 |     100 |     100 |
 components            |   65.22 |       50 |   66.67 |   65.22 |
  HighlightText.tsx    |     100 |      100 |     100 |     100 |
  SearchBar.tsx        |   45.45 |    33.33 |      50 |   45.45 |
-----------------------|---------|----------|---------|---------|
```

---

## 6.4 HTML ãƒ¬ãƒãƒ¼ãƒˆã®ç¢ºèª

<div grid="~ cols-2 gap-4">
<div>

**HTML ãƒ¬ãƒãƒ¼ãƒˆã‚’é–‹ã:**

```bash
# coverage/index.html ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã
open coverage/index.html
```

**HTML ãƒ¬ãƒãƒ¼ãƒˆã®ç‰¹å¾´:**
- ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã®è©³ç´°ã‚’ç¢ºèªã§ãã‚‹
- ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ãªã„è¡ŒãŒãƒã‚¤ãƒ©ã‚¤ãƒˆ
- ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³ã—ã¦è©³ç´°ã‚’ç¢ºèª

</div>
<div>

**ãƒ¬ãƒãƒ¼ãƒˆã®è¦‹æ–¹:**

ç·‘è‰²: ãƒ†ã‚¹ãƒˆã§ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ã‚‹
èµ¤è‰²: ãƒ†ã‚¹ãƒˆã§ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ãªã„
é»„è‰²: éƒ¨åˆ†çš„ã«ã‚«ãƒãƒ¼ï¼ˆä¸€éƒ¨ã®åˆ†å²ã®ã¿ï¼‰

**ã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Šã®ãƒ’ãƒ³ãƒˆ:**
1. èµ¤ã„è¡Œã‚’ç¢ºèª
2. ãã®è¡Œã‚’é€šã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¿½åŠ 
3. åˆ†å²ã‚’ç¶²ç¾…ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ã

</div>
</div>

---

## 6.5 ã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç›®æ¨™å€¤

<div grid="~ cols-2 gap-4">
<div>

**ä¸€èˆ¬çš„ãªç›®æ¨™å€¤:**

| æŒ‡æ¨™ | ç›®æ¨™å€¤ |
|------|--------|
| Statements | 80%ä»¥ä¸Š |
| Branches | 70%ä»¥ä¸Š |
| Functions | 80%ä»¥ä¸Š |
| Lines | 80%ä»¥ä¸Š |

**æ³¨æ„ç‚¹:**
- 100%ã‚’ç›®æŒ‡ã™å¿…è¦ã¯ãªã„
- é‡è¦ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å„ªå…ˆ
- ãƒ†ã‚¹ãƒˆã—ã«ãã„ã‚³ãƒ¼ãƒ‰ã¯è¨­è¨ˆã‚’è¦‹ç›´ã™

</div>
<div>

**ã‚«ãƒãƒ¬ãƒƒã‚¸ã—ãã„å€¤ã®è¨­å®š:**

```ts
// vite.config.ts
test: {
  coverage: {
    provider: 'v8',
    reporter: ['text', 'html'],
    thresholds: {
      statements: 80,
      branches: 70,
      functions: 80,
      lines: 80,
    },
  },
}
```

ã—ãã„å€¤ã‚’ä¸‹å›ã‚‹ã¨ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¾ã™.

</div>
</div>

---

# 7. ã¾ã¨ã‚ã¨æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

## 7.1 ä»Šå›å­¦ã‚“ã ã“ã¨

- **è‡ªå‹•ãƒ†ã‚¹ãƒˆã®å¿…è¦æ€§** - å®‰å¿ƒã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã®ä¿é™º
- **ãƒ†ã‚¹ãƒˆã®ç¨®é¡** - ãƒ¦ãƒ‹ãƒƒãƒˆ, çµ±åˆ, E2E, VRT
- **Vitest ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—** - Vite ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æœ€é©
- **Testing Library ã®ä½¿ã„æ–¹** - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦–ç‚¹ã§ãƒ†ã‚¹ãƒˆ
- **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®ãƒ†ã‚¹ãƒˆ** - ç´”ç²‹é–¢æ•°ã¯æ›¸ãã‚„ã™ã„
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ** - render, screen, userEvent
- **ã‚«ãƒãƒ¬ãƒƒã‚¸** - ãƒ†ã‚¹ãƒˆã®ç¶²ç¾…æ€§ã‚’æ•°å€¤åŒ–

---

## 7.2 ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã‚³ãƒ„

<div grid="~ cols-2 gap-4">
<div>

**è‰¯ã„ãƒ†ã‚¹ãƒˆã®ç‰¹å¾´:**

- èª­ã¿ã‚„ã™ã„ï¼ˆãƒ†ã‚¹ãƒˆåã§ã‚ã‹ã‚‹ï¼‰
- ç‹¬ç«‹ã—ã¦ã„ã‚‹ï¼ˆä»–ã®ãƒ†ã‚¹ãƒˆã«ä¾å­˜ã—ãªã„ï¼‰
- ç¹°ã‚Šè¿”ã—å®Ÿè¡Œã§ãã‚‹ï¼ˆåŒã˜çµæœã«ãªã‚‹ï¼‰
- é€Ÿã„ï¼ˆå¾…ã¡æ™‚é–“ãŒçŸ­ã„ï¼‰

**ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã‚¿ã‚¤ãƒŸãƒ³ã‚°:**

- æ–°æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ã¨ã
- ãƒã‚°ã‚’ä¿®æ­£ã™ã‚‹ã¨ã
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®å‰

</div>
<div>

**ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰:**

```
1. ãƒ†ã‚¹ãƒˆã‚’æ›¸ãï¼ˆRedï¼‰
      â†“
2. ãƒ†ã‚¹ãƒˆãŒé€šã‚‹æœ€å°ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãï¼ˆGreenï¼‰
      â†“
3. ã‚³ãƒ¼ãƒ‰ã‚’æ•´ç†ã™ã‚‹ï¼ˆRefactorï¼‰
      â†“
   1ã«æˆ»ã‚‹
```

ã¾ãšã¯ã€Œæ—¢å­˜ã‚³ãƒ¼ãƒ‰ã«ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã™ã‚‹ã€ã“ã¨ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†!

</div>
</div>

---

## 7.3 æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

<div grid="~ cols-2 gap-4">
<div>

**ã•ã‚‰ã«å­¦ã¶ã«ã¯:**

- **MSW** - API ãƒ¢ãƒƒã‚¯ã®é«˜åº¦ãªæ‰‹æ³•
- **React Testing Library ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**
- **Vitest ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**
- **Playwright / Cypress** - E2E ãƒ†ã‚¹ãƒˆ
- **Storybook + Chromatic** - VRT

</div>
<div>

**ä»Šæ—¥ã‹ã‚‰ã§ãã‚‹ã“ã¨:**

1. ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã«ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
2. ã‚«ãƒãƒ¬ãƒƒã‚¸ 80% ã‚’ç›®æŒ‡ã™
3. CI/CD ã§ãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•å®Ÿè¡Œ

ãƒ†ã‚¹ãƒˆã¯æœ€åˆã¯é¢å€’ã«æ„Ÿã˜ã¾ã™ãŒ, é•·æœŸçš„ã«ã¯ã‚³ãƒ¼ãƒ‰ã®å“è³ªã¨é–‹ç™ºé€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã¾ã™.

</div>
</div>

---
layout: section
---

# ãŠç–²ã‚Œã•ã¾ã§ã—ãŸ!

## ãƒ†ã‚¹ãƒˆã§å®‰å¿ƒã§ãã‚‹ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã‚’ä½œã‚Šã¾ã—ã‚‡ã†
