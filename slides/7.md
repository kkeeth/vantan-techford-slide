---
theme: seriph
background: https://source.unsplash.com/collection/94734566/1920x1080
class: 'text-center'
# lineNumbers: true
highlighter: shiki
info: |
  ## JavaScript/React 入門講義資料#7
  KADOKAWAドワンゴ情報工科学院
  Created by [@kuwahara_jsri](https://twitter.com/kuwahara_jsri)
fonts:
  sans: 'Noto Sans JP'
  serif: 'Noto Sans JP'
  mono: 'Fira Code'
drawings:
  persist: false
title: JavaScript/React 入門講義
---

# JavaScript/React 入門講座

KADOKAWA ドワンゴ情報工科学院

### #7 React の基本構文と Component， React Hooks
<div class="pt-12">
  <span @click="$slidev.nav.next" class="px-2 py-1 rounded cursor-pointer" hover="bg-white bg-opacity-10">
    Press Space for next page <carbon:arrow-right class="inline"/>
  </span>
</div>

---
layout: center
---

# 出席🖐

---
layout: center
---

# 今日話すこと📋

---

# `React` 入門

<br />

## 👉 JavaScript フレームワーク
<br>

## 👉 React の基礎
<br>

## 👉 コンポーネント
<br>

## 👉 React Hooks

---
layout: center
---

# 授業資料📋

---

<a href="https://vantan-techford-slide.vercel.app/" target="_blank">https://vantan-techford-slide.vercel.app/</a>

<br>

<img src="/assets/1/slide.png" width="750">

<style>
  img {
    margin: 24px auto 0;
    border: 1px solid #eee;
  }
</style>

---
layout: center
---

# `JavaScript` フレームワーク

---

# モダン `JavaScript` フレームワーク

<img src="/assets/7/js-frameworks.png" alt="" width="720" class="mx-auto">

---

# モダン `JavaScript` フレームワーク

<img src="/assets/7/js-frameworks2.png" alt="" width="720" class="mx-auto">

---

# モダン `JavaScript` ラッパーフレームワーク

<img src="/assets/7/js-wrapper-frameworks.png" alt="" width="720" class="mx-auto">

---
layout: image-left
image: /assets/7/frontend-ranking.png
---

# 比較

<br />

← 2022 年の [State of JS](https://2022.stateofjs.com/en-US/libraries/front-end-frameworks/) の結果

伸び率で言えば近年は仮想DOMなしの `Solid` や `Svelte` がかなり伸びてきています💁

---

# 比較

<img src="/assets/7/frontend-ranking2.png" alt="" width="680" class="mx-auto">

Image by: [npm trends](https://npmtrends.com/@angular/core-vs-@builder.io/qwik-vs-react-vs-solid-js-vs-svelte-vs-vue)

---
layout: center
---

# `React` の開発環境を整える

---

# `React` の開発環境の構築

### おそらく現時点では大きく3つの方法

<br />

* __① [vite]() の `react` テンプレートを利用💁__
  * モダンバンドラ
  * 今回はこちらを採用
    * 今回の講義はとにかく `React` の入門に注力するため

* __② [create-react-app](https://create-react-app.dev/) を利用💁__
  * 昔はこれがほぼデファクトスタンダードだった
  * ※現在は非推奨（後述）

<br />

* __③ [CodeSandbox](https://codesandbox.io/) から zip ファイルをダウンロード💁__
  * ダウンロードせず，そのままオンラインエディタを利用するのも有り

---

# `create-react-app` が非推奨の理由

<br />

## 実際の開発現場における環境としては現実的ではないから

<br />

* クライアントだけを持つのは `React` の今後の思想ではない
  * `react server components` の登場
  * [Next.js（React のラッパーフレームワーク）](https://nextjs.org/) の様々な機能
    * `app router`
    * `server actions` … など
* `SPA` の開発をすることがほとんど
  * つまり，どうせルーティングは必須
  * 後から色々ライブラリを導入するなら最初からインストールしておけば良い

---
layout: statement
---

## 閑話休題

---

# `React` の開発環境の構築

<br />

### 以下の手順で構築します💁

<br />

```cmd
# プロジェクトの作成
# ターミナル等でコマンドラインインターフェースから次のコマンドを実行
# "my-app" はプロジェクト名で，任意のものに変えても OK
> npm create vite@latest my-app -- --template react

# my-app ディレクトリに移動
> cd my-app

# モジュールをインストール
> npm install

# アプリの起動
> npm run dev
```

---

以下の画面が表示されたら OK 👍

<img src="/assets/7/react-local.png" alt="react のローカル環境のキャプチャ" class="mx-auto" width="880" />

---

# `Hello React!` を表示

<br />

`src/App.js` を以下のように変更💁

```diff
- <h1>Vite + React</h1>
+ <h1>Hello React!</h1>
```

---

# `Hello React!` を表示

<br />

以下のように画面が変更されたら完了❗

<img src="/assets/7/hello-react.png" alt="変更後の画面のキャプチャ" class="mx-auto" width="800">

---
layout: center
---

# React の基礎，コンポーネント

---

# React の基礎，コンポーネント

<br />

`React` とは，Meta（旧：Facebook）社が開発した，JavaScript 用フレームワークの一つ．いわゆる __コンポーネント（後述します）指向のフレームワーク__ と行ったりもします．元々は UI 部分を担当するものだったが，最近ではより柔軟に開発ができるようにサーバーサイドに処理を分けるような機能拡張（ `suspense, server components` など）が進んでいます💁

<br />

近年は Vercel 社謹製の [Next.js]() と二人三脚で開発が進んでおり，Next.js の動向も追うと良いでしょう．

---

# 書き方

<br />

ちょっと特殊ですが，以下のような `.js（厳密には .jsx）` ファイルを作成し，これを一つの部品として扱い，画面上に配置することでアプリケーションを作っていきます💁

```jsx
function App(props) {
  // 何かしらの処理

  return (
    <>
      <h1>Hello React!</h1>
    </>
  )
}

// このように書いても OK
// const App = (props) => { ... }
```

この部品のことを __コンポーネント__ と呼び，特に関数の形で書くため __関数コンポーネント__ と呼んだりもしますが，基本的にはコンポーネントと言ったら関数コンポーネントのことと思ってください💁

---

# JSX

<br />

__`JSX(JavaScript XML)`__ は，これまた Meta 社が開発した __JavaScript の拡張構文__ で，JavaScript 内で HTML を記述できるようにしたものです💁

昨今の JavaScript フレームワークは JSX で記述するものがかなり多く，今後も JSX が主流であるのは間違いないでしょう．


```jsx
function App(props) {
  // 何かしらの処理

  return (
    <>
      <h1>Hello React!</h1>
    </>
  )
}
```

* `return ()` 内 が JSX で，ここに HTML を記述する
* return で返却されるものは HTML ではなく， __React DOM__ と呼ばれるもの


---

# コンポーネントの作成

<br />

試しに書いてみましょう💁 __src/Title.jsx__ ファイル作成し，以下を記述してください．

```jsx
const Title = ({ str }) => {
  return <h1>{str}</h1>
}

export default Title;
```

<br />

* 引数 `str` を __props（プロップス）__ と言う
* コンポーネントはアッパーキャメルケースで書く慣習

※ `export default Xxx` については割愛します．知りたい方は `ES Modules` で調べてみてください💁

---

# コンポーネントを利用

<br />

続いて，今作成したコンポーネントをインポートして利用してみましょう💁

__src/App.jsx__ を開き，以下を追記してください．

```diff
// 省略
import Title from "./Title";

const App = () => {
  const [count, setCount] = useState(0);

  return (
    <>
      <div>
      // 中略
-     <h1>Hello React!</h1>
+     <Title str={"Hello React!"} />
      </div>
    </>
  )
}
```

---

# `React.Fragment`

<br />

先程までに出てきた特殊な HTML タグ `<></>`

```jsx
return (
  <>
    <div>
      ...
      <Title str={"Hello React!"} />
    </div>
  </>
)
```

は [React.Fragment]() と呼ばれる React のコンポーネントで，これの省略記号です💁
正確にはこう書きます．

```jsx
<React.Fragment>
  ...
</React.Fragment>
```

複数の要素を返したいときにこのタグで挟むことで要素をまとめることができます🙋‍♂

---

# React コンポーネントのルール

* props にはオブジェクト形式で渡す

```jsx
const Title = ({ str }) => {/** ... */}
or
const Title = (props) => {/** ... */}

//以下はエラーと成る
const Title = (str) => {/** ... */}
```

<br />

* return の JSX は __１つの HTML しか返せない__

```jsx
const Hoge = () => {
  // 以下はエラーとなる
  return (
    <div>...</div>
    <div>...</div>
  )

  // これもエラーとなる
  <>...</>
  <div>...</div>
}
```

---
layout: center
---

# `React Hooks`

---

# `React Hooks` とは？

<br />

## 📝 定義
`React Hooks（以下，Hooks: フックスと読みます）` は，関数コンポーネント内で状態やライフサイクルなどの `React` の機能を文字通り __フック__ するための関数のこと💁

<br />
<br />

## 📝 目的
__コードの再利用__ や， __コンポーネントの単純化__ のため．独立した状態の管理が可能に．

---

# hooks の種類

#### たくさんありますが，主要なものをピックアップします 💁

<br />
<br />

### よく使うもの

* `use` ※今後よく使う可能性があります（私見）が，今回は割愛します
* `useState`
* `useEffect` ※これは今後変わる可能性があります（私見）
* `useContext`

<br />

### パフォーマンスチューニングで使うもの

* `memo`
* `useMemo`
* `useCallback`

---

# hooks の使い方

#### `useState`: 状態（State）の管理

```js
/**
 * state: 状態を格納する「変数」
 * setState: 状態を変更する「関数」
 * initialState: 初期の状態（プリミティブでもオブジェクトでも可）
 */
const [state, setState] = useState(initialState)
```

<br />
<br />

#### `useEffect`: 副作用（データ取得，購読，DOM 更新など）を扱う

```js
/**
 * コンポーネントが評価されるとき１度実行
 * 以降，dependencies が変更するたびに再実行される
 * dependencies: 変更を購読・検知したい変数を配列で指定
 *
 */
useEffect(() => {
  /** 何かしらの処理 */
}, [dependencies])
```

---

# hooks の使い方（続き）

#### `useContext`: ネストしたコンポーネントの状態を管理

```jsx
/**
 * いわゆる「バケツリレー（ドリリング）問題」を避けるための hook
 */

// ThemeContext.js
export const ThemeContext = createContext();
export const ThemeProvider = ({ children }) => {
  // テーマの状態を保持
  const [theme, setTheme] = useState('light');

  // テーマを切り替える関数
  const toggleTheme = () => {
    setTheme(theme === 'light' ? 'dark' : 'light');
  };

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};
```

---

# hooks の使い方（続き）

```jsx
// App.js
import { ThemeProvider } from './ThemeContext';
import ThemeSwitcher from './ThemeSwitcher';

export const App = () => {
  return (
    <ThemeProvider>
      <div>
        <h1>テーマ切り替えアプリ</h1>
        <ThemeSwitcher />
      </div>
    </ThemeProvider>
  );
}
```

---

# hooks の使い方（続き）

```jsx
// ThemeSwitcher.js
import { ThemeContext } from './ThemeContext';

export const ThemeSwitcher = () => {
  const { theme, toggleTheme } = useContext(ThemeContext);

  return (
    <div>
      <button onClick={toggleTheme}>
        {theme === 'light' ? '暗いテーマに切り替え' : '明るいテーマに切り替え'}
      </button>
      <div style={{ marginTop: '20px' }}>
        現在のテーマ: {theme === 'light' ? '明るい' : '暗い'}
      </div>
    </div>
  );
}
```

---
layout: center
---

# ToDo リストの作成

※ライブコーディングのため，資料は後ほど更新します 🙇

---
layout: center
---

# 課題

### ▶ ToDo リストを完成させてみてください💁

<br />

### ▶ スタイリングも自由にアレンジしましょう💁

<br />

### ▶ 【発展課題】データの永続・保存をしてみてください💁

（やり方は問いませんが， `lodalStorage` や `sessionStorage` が簡単です）

<br />

※提出もお願いします

---
layout: image-right
image: https://source.unsplash.com/collection/94734566/1920x1080
---

# 提出方法

### ▼アップロード
インターネットに公開できる方は公開した URL を教えてください🙋‍♂

### ▼HTML/CSS ファイルを共有
ファイルを圧縮して [こちらの Google Drive](https://drive.google.com/drive/folders/1SHb-FE6GrMmlAQDCwI0ST_l9NU7XiHZl?usp=sharing) にアップロードしてください🙋‍♂

※Google アカウントを持っていない方は slack の DM で直接私宛に送ってください🙇‍♂

---
layout: intro
---

# 来週学ぶこと

<br />

### 📝  `React` で簡単な SPA 開発

<br />

私が所属する [株式会社ゆめみ](https://yumemi.co.jp) の[フロントエンドエンジニアのコーディング試験](https://notion.yumemi.co.jp/%E6%8E%A1%E7%94%A8%E9%96%A2%E9%80%A3%E8%B3%87%E6%96%99%E5%85%AC%E9%96%8B/%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E8%A9%A6%E9%A8%93) を実際にやってみましょう🙋‍♂
